import{Q as ge,N as De,_ as P,a as he,b as ue,c as ae,d as fe,e as Ae,f as ye,u as Z,g as ee,h as ke,i as Se,j as Te,k as qe,l as ze}from"./QPage.10c2bf53.js";import{$ as Ie,_ as Y,a0 as _e,O as R,Y as Ce,R as V,S as L,P as M,a1 as Oe}from"./index.3fb24c35.js";import{d as S,o as g,f as w,g as e,Q as G,a0 as J,j as s,l as c,q as k,t as C,k as _,ab as H,y as b,e as x,a1 as le,ac as Be,ad as te,ae as se,c as B,af as Me,z as He,ag as X,C as Fe,v as Ue,F as Ne,L as Ye,h as z,w as ie,U as Re,D as Ve,ah as Le,ai as ne,G as je}from"./index.b811bc3c.js";import{_ as $e}from"./ButtonGroup.a0521572.js";import{_ as Ee,a as ce,b as be,c as Pe,d as Qe,e as We}from"./OutletOverview.69be6e0c.js";import{_ as Ge,a as Je,b as Ke}from"./RankWarning.c3bbe256.js";import{_ as Xe,a as Ze,b as et}from"./OutletSourceList.3b02f085.js";import"./light.ca0a31c2.js";const tt={class:"column"},st={class:"col row"},nt={class:"text-weight-bolder text-h6 text-center"},ot={class:"digit-font text-h5 q-ml-md"},ut={class:"row justify-end"},at={class:"col text-right text-weight-bold text-subtitle1"},lt={class:"col-auto text-center",style:{width:"30px"}},it={class:"col-auto home-bottom row justify-center items-end q-pb-md"},ct=S({__name:"BottomNav",setup(t){const n=[{title:"\u76D1\u6D4B",children:[{name:"\u6392\u884C",status:"success"},{name:"\u5386\u53F2\u6570\u636E",status:"success"}]},{title:"\u7BA1\u7406",children:[{name:"\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]},{title:"\u6CBB\u7406\u8FC7\u7A0B",children:[{name:"\u6CBB\u7406\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]},{title:"\u6CBB\u7406\u8FC7\u7A0B",children:[{name:"\u6CBB\u7406\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]},{title:"\u6CBB\u7406\u8FC7\u7A0B",children:[{name:"\u6CBB\u7406\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]}];return(l,r)=>{const p=Ee,i=Y,d=$e;return g(),w("div",tt,[e("div",st,[(g(),w(G,null,J(n,(h,m)=>e("div",{class:"col-auto",key:m},[s(_(Ie),{style:{width:"220px",height:"250px",margin:"0 -4px"}},{default:c(()=>[s(ge,{class:"q-pa-md",style:{height:"230px"}},{default:c(()=>[e("div",nt,[k(C(h.title)+" ",1),e("span",ot,"0"+C(m+1),1)]),(g(!0),w(G,null,J(h.children,(y,u)=>(g(),w("div",{class:"",key:u},[e("div",ut,[e("div",at,C(y.name),1),e("div",lt,[s(p,{dot:"",type:y.status},null,8,["type"])])])]))),128))]),_:2},1024)]),_:2},1024)])),64))]),e("div",it,[s(d,null,{default:c(()=>[s(i,{round:"",type:"primary",style:{width:"100px"},onClick:r[0]||(r[0]=h=>l.$router.push({name:"\u65E0\u7EC4\u7EC7"}))},{default:c(()=>[k(" \u5B89\u5168\u7BA1\u7406 ")]),_:1}),s(i,{round:"",style:{width:"100px"}},{default:c(()=>[k(" \u5B89\u5168\u6559\u80B2 ")]),_:1})]),_:1})])])}}});var rt=H(ct,[["__scopeId","data-v-60763749"]]);const dt={class:"row full-height items-end q-pb-xl"},_t={class:"col-4 row justify-end"},vt={class:"col-4 relative-position"},pt={class:"home-bottom-center"},mt={class:"footer-btn absolute-center"},gt={class:"col-4"},ht=S({__name:"HomeFooter",setup(t){const n=b(!1);return(l,r)=>{const p=rt,i=De,d=Y;return g(),w("div",dt,[e("div",_t,[s(_(_e),{style:{width:"300px",height:"30px"}})]),e("div",vt,[e("div",pt,[n.value?(g(),x(p,{key:0})):le("",!0)]),e("div",mt,[s(d,{circle:"",tertiary:"",type:"primary",size:"tiny",onClick:r[0]||(r[0]=h=>n.value=!n.value)},{icon:c(()=>[s(i,null,{default:c(()=>[s(Be,{name:"settings_overscan"})]),_:1})]),_:1})])]),e("div",gt,[s(_(_e),{style:{width:"300px",height:"30px"}})])])}}});var ft=H(ht,[["__scopeId","data-v-e07e3826"]]);const xe=t=>(te("data-v-d6591f4c"),t=t(),se(),t),yt={key:0,class:"fit text-weight-bold text-center row q-col-gutter-sm"},Ct={class:"col-auto",style:{width:"200px"}},Bt=xe(()=>e("div",{class:"row text-info"},[e("div",{class:"col"},"\u6307\u6807"),e("div",{class:"col"},"\u6807\u51C6\u5DEE/\u504F\u79BB\u503C")],-1)),Ft={class:"device-table"},$t={class:"col"},Et={class:"col"},bt={class:"text-primary text-weight-bold"},xt={class:"text-primary"},wt={class:"text-warning"},Dt={class:"col"},At=xe(()=>e("div",{class:"row text-info"},[e("div",{class:"col"},"\u6307\u6807"),e("div",{class:"col"},"\u5355\u4F4D"),e("div",{class:"col"},"\u5E73\u5747\u503C"),e("div",{class:"col"},"\u6700\u5927\u503C"),e("div",{class:"col"},"\u6700\u5C0F\u503C")],-1)),kt={class:"device-table"},St={class:"col"},Tt={class:"col simple-font"},qt={class:"col simple-font text-info"},zt={class:"col simple-font text-primary"},It={class:"col simple-font text-positive"},Ot=S({__name:"UnorganizeMonitor",setup(t){const{data:n}=R(V.unoCount,L,{revalidateOnFocus:!1});return(l,r)=>{const p=P;return g(),x(p,{title:"\u98DE\u53C2\u6570\u636E\u5206\u6790"},{default:c(()=>[_(n)?(g(),w("div",yt,[e("div",Ct,[Bt,e("div",Ft,[(g(!0),w(G,null,J(_(n).left,i=>(g(),w("div",{class:"row",key:i.name},[e("div",$t,C(i.name),1),e("div",Et,[e("span",bt,[e("span",xt,C(i.online),1),k(" / "),e("span",wt,C(i.total),1)])])]))),128))])]),e("div",Dt,[At,e("div",kt,[(g(!0),w(G,null,J(_(n).right,i=>(g(),w("div",{class:"row",key:i.name},[e("div",St,C(i.name),1),e("div",Tt,C(i.unit),1),e("div",qt,C(i.avg.toFixed(2)),1),e("div",zt,C(i.max.toFixed(2)),1),e("div",It,C(i.min.toFixed(2)),1)]))),128))])])])):(g(),x(_(Ce),{key:1,class:"fit"}))]),_:1})}}});var Mt=H(Ot,[["__scopeId","data-v-d6591f4c"]]);const Ht={ratio:[String,Number]};function Ut(t,n){return B(()=>{const l=Number(t.ratio||(n!==void 0?n.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}function ve(){let t=null;const n=Fe();function l(){t!==null&&(clearTimeout(t),t=null)}return Me(l),He(l),{removeTimeout:l,registerTimeout(r,p){l(),X(n)===!1&&(t=setTimeout(()=>{t=null,r()},p))}}}const Nt=1.7778;var pe=Ue({name:"QImg",props:{...Ht,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Nt},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(t,{slots:n,emit:l}){const r=b(t.initialRatio),p=Ut(t,r),i=Fe(),{registerTimeout:d,removeTimeout:h}=ve(),{registerTimeout:m,removeTimeout:y}=ve(),u=B(()=>t.placeholderSrc!==void 0?{src:t.placeholderSrc}:null),o=B(()=>t.errorSrc!==void 0?{src:t.errorSrc,__qerror:!0}:null),v=[b(null),b(u.value)],a=b(0),$=b(!1),D=b(!1),F=B(()=>`q-img q-img--${t.noNativeMenu===!0?"no-":""}menu`),E=B(()=>({width:t.width,height:t.height})),T=B(()=>`q-img__image ${t.imgClass!==void 0?t.imgClass+" ":""}q-img__image--with${t.noTransition===!0?"out":""}-transition q-img__image--`),U=B(()=>({...t.imgStyle,objectFit:t.fit,objectPosition:t.position}));function I(){if(y(),t.loadingShowDelay===0){$.value=!0;return}m(()=>{$.value=!0},t.loadingShowDelay)}function O(){y(),$.value=!1}function W({target:f}){X(i)===!1&&(h(),r.value=f.naturalHeight===0?.5:f.naturalWidth/f.naturalHeight,j(f,1))}function j(f,N){N===1e3||X(i)===!0||(f.complete===!0?A(f):d(()=>{j(f,N+1)},50))}function A(f){X(i)!==!0&&(a.value=a.value^1,v[a.value].value=null,O(),f.getAttribute("__qerror")!=="true"&&(D.value=!1),l("load",f.currentSrc||f.src))}function q(f){h(),O(),D.value=!0,v[a.value].value=o.value,v[a.value^1].value=u.value,l("error",f)}function de(f){const N=v[f].value,K={key:"img_"+f,class:T.value,style:U.value,alt:t.alt,crossorigin:t.crossorigin,decoding:t.decoding,referrerpolicy:t.referrerpolicy,height:t.height,width:t.width,loading:t.loading,fetchpriority:t.fetchpriority,"aria-hidden":"true",draggable:t.draggable,...N};return a.value===f?Object.assign(K,{class:K.class+"current",onLoad:W,onError:q}):K.class+="loaded",z("div",{class:"q-img__container absolute-full",key:"img"+f},z("img",K))}function we(){return $.value===!1?z("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Ve(n[D.value===!0?"error":"default"])):z("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},n.loading!==void 0?n.loading():t.noSpinner===!0?void 0:[z(Le,{color:t.spinnerColor,size:t.spinnerSize})])}{let f=function(){ie(()=>t.src||t.srcset||t.sizes?{src:t.src,srcset:t.srcset,sizes:t.sizes}:null,N=>{h(),D.value=!1,N===null?(O(),v[a.value^1].value=u.value):I(),v[a.value].value=N},{immediate:!0})};Ne.value===!0?Ye(f):f()}return()=>{const f=[];return p.value!==null&&f.push(z("div",{key:"filler",style:p.value})),v[0].value!==null&&f.push(de(0)),v[1].value!==null&&f.push(de(1)),f.push(z(Re,{name:"q-transition--fade"},we)),z("div",{key:"main",class:F.value,style:E.value,role:"img","aria-label":t.alt},f)}}}),me="./assets/company.e14e5d37.png";const Yt=e("span",{class:"text-info cursor-pointer",style:{"font-weight":"lighter"}}," \u67E5\u770B\u5168\u90E8 ",-1),Rt={class:"row fit items-center q-gutter-x-sm"},Vt=S({__name:"MonitorArea",setup(t){return(n,l)=>{const r=P;return g(),x(r,{title:"\u91CD\u70B9\u533A\u57DF\u76D1\u63A7"},{"header-extra":c(()=>[Yt]),default:c(()=>[e("div",Rt,[s(pe,{src:_(me),class:"col"},null,8,["src"]),s(pe,{src:_(me),class:"col"},null,8,["src"])])]),_:1})}}});function Lt(t){const n=B(()=>`${V.cleaner}/${t.value.deviceId}/${t.value.range}?time_start=${t.value.time_start}&time_end=${t.value.time_end}`),{data:l}=R(n,L,{revalidateOnFocus:!1,dedupingInterval:1e3*60*60*24});return{cleanerEvents:B(()=>l.value||[])}}const jt={class:"event-table"},Pt=e("div",{class:"sigma-title2"},"\u57FA\u672C\u4FE1\u606F",-1),Qt={class:"row"},Wt={class:"col"},Gt=e("span",null,"\u4F4D\u7F6E:",-1),Jt={class:"q-ml-sm text-info"},Kt={class:"col"},Xt=e("span",null,"\u4ECA\u65E5\u6B21\u6570:",-1),Zt={class:"q-ml-sm text-info"},es={class:"col"},ts=e("span",null,"\u6628\u65E5\u6B21\u6570:",-1),ss={class:"q-ml-sm text-info"},ns={class:"col"},os=e("span",null,"\u5B89\u88C5\u65F6\u95F4:",-1),us={class:"q-ml-sm text-info"},as={class:"col"},ls=e("span",null,"\u914D\u7F6E1:",-1),is={class:"q-ml-sm text-info"},cs={class:"col"},rs=e("span",null,"\u914D\u7F6E2:",-1),ds={class:"q-ml-sm text-info"},_s={class:"col"},vs=e("span",null,"\u914D\u7F6E3:",-1),ps={class:"q-ml-sm text-info"},ms=e("div",{class:"sigma-title2"},"\u7EF4\u4FEE\u8BB0\u5F55",-1),gs=S({__name:"CleanerEventTable",props:{cleaner:{},height:{}},setup(t){const n=t,l=b(null),r=F=>({style:{cursor:"pointer"},onClick:()=>{l.value=F}}),p=[{title:"\u5E8F\u53F7",key:"id",align:"center",render:function(F,E){return E+1}},{title:"\u7F16\u53F7",key:"car_id",align:"center"},{title:"\u5F00\u59CB\u65F6\u95F4",key:"time_start",align:"center"},{title:"\u98DE\u884C\u65F6\u957F",key:"seconds",align:"center",render(F){return F.seconds+"\u79D2"}},{title:"\u7ED3\u675F\u65F6\u95F4",key:"time_end",align:"center"},{title:"\u5E73\u5747\u53C2\u6570",key:"pressure",align:"center",render(F){return F.pressure.toFixed(2)+" MPa"}}],i=B(()=>({pageSize:20,size:"small",suffix:()=>"\u5171"+v.value.length+"\u6761",showQuickJumper:!0})),d=b("default"),h=[{label:"\u9ED8\u8BA4",value:"default"},{label:"\u65E5",value:"day"},{label:"\u5468",value:"week"},{label:"\u6708",value:"month"}],m=b([M().subtract(1,"day").valueOf(),M().valueOf()]),y=B(()=>M(m.value[0]).format("YYYY-MM-DD HH")+":00:00"),u=B(()=>M(m.value[1]).format("YYYY-MM-DD HH")+":00:00"),o=b({deviceId:n.cleaner.id,range:d.value,time_start:y.value,time_end:u.value}),{cleanerEvents:v}=Lt(o);function a(){o.value={deviceId:n.cleaner.id,range:d.value,time_start:y.value,time_end:u.value}}function $(){d.value="default",m.value=[M().subtract(1,"day").valueOf(),M().valueOf()],o.value={deviceId:n.cleaner.id,range:d.value,time_start:y.value,time_end:u.value}}function D(F){return F>Date.now()}return(F,E)=>{const T=ae,U=fe,I=Ae,O=Y,W=ye,j=he,A=ue;return g(),w("div",jt,[Pt,e("div",Qt,[e("div",Wt,[Gt,e("span",Jt,C(F.cleaner.name),1)]),e("div",Kt,[Xt,e("span",Zt,C(F.cleaner.today),1)]),e("div",es,[ts,e("span",ss,C(F.cleaner.yesterday),1)]),e("div",ns,[os,e("span",us,C(F.cleaner.date),1)]),e("div",as,[ls,e("span",is,C(F.cleaner.dry?"\u6709":"\u65E0"),1)]),e("div",cs,[rs,e("span",ds,C(F.cleaner.shake?"\u6709":"\u65E0"),1)]),e("div",_s,[vs,e("span",ps,C(F.cleaner.sewage?"\u6709":"\u65E0"),1)])]),ms,s(j,{"label-placement":"left",size:"small",class:"q-my-md"},{default:c(()=>[s(W,{cols:24,"x-gap":16},{default:c(()=>[s(U,{span:3,label:"\u65F6\u95F4\u7EF4\u5EA6:","label-style":"color:#98f2fd"},{default:c(()=>[s(T,{value:d.value,"onUpdate:value":E[0]||(E[0]=q=>d.value=q),options:h},null,8,["value"])]),_:1}),s(U,{span:10,label:"\u8D77\u6B62\u65F6\u95F4:","label-style":"color:#98f2fd"},{default:c(()=>[d.value==="default"?(g(),x(I,{key:0,value:m.value,"onUpdate:value":E[1]||(E[1]=q=>m.value=q),type:"datetimerange","is-date-disabled":D},null,8,["value"])):d.value==="day"?(g(),x(I,{key:1,value:m.value[0],"onUpdate:value":E[2]||(E[2]=q=>m.value[0]=q),type:"date","is-date-disabled":D},null,8,["value"])):d.value==="week"?(g(),x(I,{key:2,value:m.value,"onUpdate:value":E[3]||(E[3]=q=>m.value=q),type:"daterange","is-date-disabled":D},null,8,["value"])):(g(),x(I,{key:3,value:m.value[0],"onUpdate:value":E[4]||(E[4]=q=>m.value[0]=q),type:"month","is-date-disabled":D},null,8,["value"]))]),_:1}),s(U,{span:10},{default:c(()=>[s(O,{type:"info",size:"small",onClick:a},{default:c(()=>[k(" \u67E5\u8BE2 ")]),_:1}),s(O,{type:"info",size:"small",class:"q-mx-md",onClick:$},{default:c(()=>[k(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1}),s(A,{columns:p,"row-props":r,data:_(v),pagination:i.value,"max-height":F.height||300,striped:"",class:"sigma-table"},null,8,["data","pagination","max-height"])])}}});function hs(){const{data:t}=R(V.cleaner,L,{revalidateOnFocus:!1,dedupingInterval:36e5});return{cleaners:B(()=>t.value||[])}}const fs=S({__name:"CleanerTable",props:{height:{}},setup(t){const{cleaners:n}=hs(),l=b(null),r=m=>({style:{cursor:"pointer"},onClick:()=>{l.value=m,h()}}),p=[{title:"\u5E8F\u53F7",key:"id",align:"center",render:function(m,y){return y+1}},{title:"\u540D\u79F0",key:"name",align:"center"},{title:"\u4ECA\u65E5\u5C0F\u65F6",key:"today",align:"center"},{title:"\u4E0A\u6B21\u98DE\u884C\u65F6\u957F",key:"yesterday",align:"center"},{title:"\u7D2F\u8BA1\u98DE\u884C",key:"count",align:"center"},{title:"\u4F7F\u7528\u65F6\u95F4",key:"date",align:"center"}],i=B(()=>({pageSize:20,size:"small",suffix:()=>"\u5171"+n.value.length+"\u6761",showQuickJumper:!0})),{bool:d,setTrue:h}=Z();return(m,y)=>{const u=ue,o=gs,v=ee;return g(),w("div",null,[s(u,{columns:p,"row-props":r,data:_(n),pagination:i.value,"max-height":m.height||300,striped:"",class:"sigma-table"},null,8,["data","pagination","max-height"]),l.value?(g(),x(v,{key:0,modelValue:_(d),"onUpdate:modelValue":y[0]||(y[0]=a=>ne(d)?d.value=a:null),title:"\u98DE\u884C\u53F0\u8D26",style:{width:"50vw"}},{default:c(()=>[s(o,{cleaner:l.value},null,8,["cleaner"])]),_:1},8,["modelValue"])):le("",!0)])}}});const Q=t=>(te("data-v-846ebdbe"),t=t(),se(),t),ys={class:"row fit items-center"},Cs={class:"col-6"},Bs={class:"row text-center"},Fs={class:"col-6"},$s=Q(()=>e("div",{class:"wash-bottom"},null,-1)),Es={class:"col-6"},bs={class:"tape-font sigma-digit text-primary"},xs=Q(()=>e("div",{class:"text-warning"},"\u98DE\u884C\u67B6\u6B21",-1)),ws={class:"col-6 text-center"},Ds={class:"sigma-underline"},As=Q(()=>e("span",{class:"text-primary"},"\u4ECA\u65E5\u68C0\u4FEE",-1)),ks={class:"text-primary tape-font sigma-digit"},Ss=Q(()=>e("span",{class:"text-primary"},"\u6B21",-1)),Ts={class:"sigma-underline"},qs=Q(()=>e("span",{class:"text-primary"},"\u672C\u5468\u68C0\u4FEE",-1)),zs={class:"text-warning tape-font sigma-digit"},Is=Q(()=>e("span",{class:"text-primary"},"\u6B21",-1)),Os=S({__name:"WashCount",setup(t){const{data:n}=R(V.washCount,L,{revalidateOnFocus:!0}),{bool:l,setTrue:r}=Z();return(p,i)=>{const d=ce,h=fs,m=ee,y=P;return g(),x(y,{title:"\u98DE\u884C\u52A8\u6001",loading:!_(n),class:"cursor-pointer",onClick:_(r)},{default:c(()=>{var u,o,v;return[e("div",ys,[e("div",Cs,[e("div",Bs,[e("div",Fs,[s(Be,{name:"flight_takeoff",size:"80px",color:"primary"}),$s]),e("div",Es,[e("div",null,[e("span",bs,[s(d,{from:0,to:(u=_(n))==null?void 0:u.deviceCount},null,8,["to"])]),k(" \u67B6\u6B21 ")]),xs])])]),e("div",ws,[e("div",Ds,[As,e("span",ks,[s(d,{from:0,to:(o=_(n))==null?void 0:o.day},null,8,["to"])]),Ss]),e("div",Ts,[qs,e("span",zs,[s(d,{from:0,to:(v=_(n))==null?void 0:v.week},null,8,["to"])]),Is])])]),s(m,{modelValue:_(l),"onUpdate:modelValue":i[0]||(i[0]=a=>ne(l)?l.value=a:null),title:"\u98DE\u884C\u53F0\u8D26",style:{width:"50vw"}},{default:c(()=>[s(h)]),_:1},8,["modelValue"])]}),_:1},8,["loading","onClick"])}}});var Ms=H(Os,[["__scopeId","data-v-846ebdbe"]]);const Hs=t=>(te("data-v-342d324d"),t=t(),se(),t),Us={key:0,class:"fit row"},Ns={class:"col full-height"},Ys={class:"col-auto full-height text-center column justify-center right-side"},Rs={class:"text-grey"},Vs={class:"text-primary digit-font total-digit"},Ls=Hs(()=>e("div",{class:"text-grey"},"\u5C0F\u65F6",-1)),js=S({__name:"DeviceHourChart",setup(t){const n=b("year"),l=b("1"),r=[{label:"\u673A\u578B1",value:"1"},{label:"\u673A\u578B2",value:"2"},{label:"\u673A\u578B3",value:"3"}],p=B(()=>V.deviceHours+n.value+"/"+l.value),{data:i}=R(p,L,{revalidateOnFocus:!1,dedupingInterval:1e3*60*5}),d=B(()=>i.value?i.value.y.reduce((u,o)=>u+o,0):0),h=B(()=>n.value==="day"?"\u65E5\u7D2F\u8BA1":n.value==="week"?"\u5468\u7D2F\u8BA1":n.value==="month"?"\u6708\u7D2F\u8BA1":"\u5E74\u7D2F\u8BA1"),m=B(()=>{var u,o;return{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:(u=i.value)==null?void 0:u.x}],yAxis:[{type:"value",name:"\u5355\u4F4D: h"}],series:[{type:"bar",itemStyle:{color:new Se.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(242, 164, 129)"},{offset:1,color:"rgb(43, 116, 255)"}])},data:(o=i.value)==null?void 0:o.y}]}}),{domRef:y}=ke(m);return(u,o)=>{const v=Y,a=$e,$=ae,D=be,F=ce,E=P;return g(),x(E,{title:"\u98DE\u884C\u65F6\u957F\u7EDF\u8BA1"},{"header-extra":c(()=>[s(D,null,{default:c(()=>[s(a,{size:"tiny"},{default:c(()=>[s(v,{type:n.value==="day"?"primary":"default",onClick:o[0]||(o[0]=T=>n.value="day")},{default:c(()=>[k(" \u65E5 ")]),_:1},8,["type"]),s(v,{type:n.value==="week"?"primary":"default",onClick:o[1]||(o[1]=T=>n.value="week")},{default:c(()=>[k(" \u5468 ")]),_:1},8,["type"]),s(v,{type:n.value==="month"?"primary":"default",onClick:o[2]||(o[2]=T=>n.value="month")},{default:c(()=>[k(" \u6708 ")]),_:1},8,["type"]),s(v,{type:n.value==="year"?"primary":"default",onClick:o[3]||(o[3]=T=>n.value="year")},{default:c(()=>[k(" \u5E74 ")]),_:1},8,["type"])]),_:1}),s($,{size:"tiny",value:l.value,"onUpdate:value":o[4]||(o[4]=T=>l.value=T),options:r,"consistent-menu-width":!1},null,8,["value"])]),_:1})]),default:c(()=>[_(i)?(g(),w("div",Us,[e("div",Ns,[e("div",{class:"fit",ref_key:"chartRef",ref:y},null,512)]),e("div",Ys,[e("div",Rs,C(h.value),1),s(_(Oe),{style:{width:"160px",height:"40px"}},{default:c(()=>[e("div",Vs,[s(F,{from:0,to:d.value},null,8,["to"])])]),_:1}),Ls])])):(g(),x(_(Ce),{key:1}))]),_:1})}}});var Ps=H(js,[["__scopeId","data-v-342d324d"]]);function re(){const{data:t}=R(V.devices,L,{revalidateOnFocus:!1,dedupingInterval:864e5}),n=b(M().format("YYYY-MM-DD HH:mm:ss"));ie(()=>t,()=>{n.value=M().format("YYYY-MM-DD HH:mm:ss")});const l=B(()=>!t.value),r=B(()=>t.value?t.value:[]),p=B(()=>{var o;return(o=r.value)==null?void 0:o.filter(v=>v.status==="\u5728\u7EBF")}),i=B(()=>({total:r.value.length,monitor:r.value.filter(o=>o.class==="\u76D1\u6D4B\u8BBE\u5907").length,monitorActive:p.value.filter(o=>o.class==="\u76D1\u6D4B\u8BBE\u5907").length,control:r.value.filter(o=>o.class==="\u6CBB\u7406\u8BBE\u5907").length,controlActive:p.value.filter(o=>o.class==="\u6CBB\u7406\u8BBE\u5907").length,produce:r.value.filter(o=>o.class==="\u751F\u4EA7\u8BBE\u5907").length,produceActive:p.value.filter(o=>o.class==="\u751F\u4EA7\u8BBE\u5907").length})),d=B(()=>{const o=new Set;r.value.forEach(a=>{o.add(a.department)});const v=[{label:"\u5168\u90E8",value:"\u5168\u90E8"}];return o.forEach(a=>{v.push({label:a,value:a})}),v}),h=B(()=>{const o=new Set;r.value.forEach(a=>{o.add(a.type)});const v=[{label:"\u5168\u90E8",value:"\u5168\u90E8"}];return o.forEach(a=>{v.push({label:a,value:a})}),v}),m=B(()=>{const o=new Set;r.value.forEach(a=>{o.add(a.status)});const v=[{label:"\u5168\u90E8",value:"\u5168\u90E8"}];return o.forEach(a=>{v.push({label:a,value:a})}),v}),y=[{label:"\u5168\u90E8",value:"\u5168\u90E8"},{label:"\u673A\u578B1",value:"\u673A\u578B1"},{label:"\u673A\u578B2",value:"\u673A\u578B2"},{label:"\u673A\u578B3",value:"\u673A\u578B3"}],u=B(()=>({departmentOptions:d.value,deviceTypeOptions:h.value,deviceStatusOptions:m.value,deviceClassOptions:y}));return{devices:r,loading:l,deviceCount:i,datetime:n,options:u}}const Qs={class:"row full-height q-py-md"},Ws={class:"col-auto sigma-number"},Gs={class:"col text-info"},Js=S({__name:"DeviceTableTop",setup(t){const{deviceCount:n}=re(),l=B(()=>[{title:"\u98DE\u673A\u603B\u6570",value:n.value.total},{title:"\u673A\u578B1",value:n.value.monitor},{title:"\u673A\u578B2",value:n.value.control},{title:"\u673A\u578B3",value:n.value.produce}]);return(r,p)=>{const i=ce,d=Pe;return g(),x(d,null,{default:c(()=>[e("div",Qs,[(g(!0),w(G,null,J(l.value,h=>(g(),w("div",{class:"col-3 full-height column items-center item",key:h.title},[e("div",Ws,[s(i,{from:0,to:h.value},null,8,["to"])]),e("div",Gs,C(h.title),1)]))),128))])]),_:1})}}});var Ks=H(Js,[["__scopeId","data-v-0b7d26b4"]]);const Xs={class:"q-px-lg"},Zs=S({__name:"DeviceTable",setup(t){const{bool:n,setTrue:l}=Z(),{devices:r,loading:p,options:i}=re(),d=b(r.value),h=b(null);ie(()=>p.value,a=>{a||(d.value=r.value)});const m=[{title:"\u5E8F\u53F7",key:"index",align:"center"},{title:"\u6240\u5C5E\u5927\u961F",key:"department"},{title:"\u7F16\u7801",key:"code"},{title:"\u540D\u79F0",key:"name"},{title:"\u7C7B\u522B",key:"class"},{title:"\u578B\u53F7",key:"type"},{title:"\u72B6\u6001",key:"status",render:function(a){return z(be,{},()=>[z(Ee,{type:a.status==="\u5728\u7EBF"||a.status==="\u8FD0\u884C"?"success":"error",dot:!0}),a.status])}},{title:"\u64CD\u4F5C",key:"id",align:"center",render:function(a){return z(Y,{tertiary:!0,size:"tiny",type:"info",onClick:()=>{h.value=a,l()}},()=>"\u67E5\u770B\u8BE6\u60C5")}}],y={department:"\u5168\u90E8",deviceClass:"\u5168\u90E8",deviceType:"\u5168\u90E8",status:"\u5168\u90E8",code:""},u=je({...y});function o(){Object.assign(u,y),d.value=r.value}function v(){d.value=r.value.filter(a=>(u.department==="\u5168\u90E8"||a.department===u.department)&&(u.deviceClass==="\u5168\u90E8"||a.class===u.deviceClass)&&(u.deviceType==="\u5168\u90E8"||a.type===u.deviceType)&&(u.status==="\u5168\u90E8"||a.status===u.status)&&(u.code===""||a.code.includes(u.code)||a.name.includes(u.code)))}return(a,$)=>{const D=Ks,F=ae,E=fe,T=Te,U=ye,I=he,O=ue,W=Qe,j=ee;return g(),w("div",Xs,[s(D),s(I,{class:"q-mt-sm",model:u,"label-placement":"left",size:"small"},{default:c(()=>[s(U,{cols:24,"x-gap":16},{default:c(()=>[s(E,{span:6,label:"\u6240\u5C5E\u5927\u961F:",path:"department"},{default:c(()=>[s(F,{value:u.department,"onUpdate:value":$[0]||($[0]=A=>u.department=A),filterable:"",options:_(i).departmentOptions},null,8,["value","options"])]),_:1}),s(E,{span:6,label:"\u8BBE\u5907\u7C7B\u522B:",path:"deviceClass"},{default:c(()=>[s(F,{value:u.deviceClass,"onUpdate:value":$[1]||($[1]=A=>u.deviceClass=A),filterable:"",options:_(i).deviceClassOptions},null,8,["value","options"])]),_:1}),s(E,{span:6,label:"\u8BBE\u5907\u7C7B\u578B:",path:"deviceType"},{default:c(()=>[s(F,{value:u.deviceType,"onUpdate:value":$[2]||($[2]=A=>u.deviceType=A),filterable:"",options:_(i).deviceTypeOptions},null,8,["value","options"])]),_:1}),s(E,{span:6,label:"\u8BBE\u5907\u72B6\u6001:",path:"status"},{default:c(()=>[s(F,{value:u.status,"onUpdate:value":$[3]||($[3]=A=>u.status=A),filterable:"",options:_(i).deviceStatusOptions},null,8,["value","options"])]),_:1}),s(E,{span:6,label:"\u8BBE\u5907\u7F16\u7801/\u540D\u79F0:",path:"code"},{default:c(()=>[s(T,{value:u.code,"onUpdate:value":$[4]||($[4]=A=>u.code=A),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["value"])]),_:1}),s(E,null,{default:c(()=>[s(_(Y),{type:"info",strong:"",secondary:"",onClick:v},{default:c(()=>[k(" \u67E5\u8BE2 ")]),_:1}),s(_(Y),{class:"q-ml-sm",type:"info",strong:"",secondary:"",onClick:o},{default:c(()=>[k(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),s(O,{columns:m,data:d.value,pagination:!1,loading:_(p),"max-height":250,"virtual-scroll":"",striped:"",size:"small",class:"sigma-table"},null,8,["data","loading"]),h.value?(g(),x(j,{key:0,modelValue:_(n),"onUpdate:modelValue":$[5]||($[5]=A=>ne(n)?n.value=A:null),title:"\u98DE\u884C\u53C2\u6570",style:{width:"50vw"}},{default:c(()=>[s(W,{device:h.value},null,8,["device"])]),_:1},8,["modelValue"])):le("",!0)])}}});const oe=t=>(te("data-v-394e07c9"),t=t(),se(),t),en={class:"text-primary text-subtitle1"},tn={class:"fit q-pt-lg"},sn={class:"text-weight-bold text-center"},nn=oe(()=>e("div",{class:"row text-info"},[e("div",{class:"col"}),e("div",{class:"col"},"\u603B\u6570(\u67B6)"),e("div",{class:"col"},"\u5728\u98DE(\u67B6)")],-1)),on={class:"device-table"},un={class:"row"},an=oe(()=>e("div",{class:"col text-info"},"\u673A\u578B1",-1)),ln={class:"col"},cn={class:"text-warning text-weight-bold digit-font",style:{"font-size":"24px"}},rn={class:"col"},dn={class:"text-primary text-weight-bold digit-font",style:{"font-size":"24px"}},_n={class:"row"},vn=oe(()=>e("div",{class:"col text-warning"},"\u673A\u578B2",-1)),pn={class:"col"},mn={class:"text-warning text-weight-bold digit-font",style:{"font-size":"24px"}},gn={class:"col"},hn={class:"text-primary text-weight-bold digit-font",style:{"font-size":"24px"}},fn={class:"row"},yn=oe(()=>e("div",{class:"col text-primary"},"\u673A\u578B3",-1)),Cn={class:"col"},Bn={class:"text-warning text-weight-bold digit-font",style:{"font-size":"24px"}},Fn={class:"col"},$n={class:"text-primary text-weight-bold digit-font",style:{"font-size":"24px"}},En=S({__name:"DeviceCount",setup(t){const{loading:n,deviceCount:l,datetime:r}=re(),{bool:p}=Z();return(i,d)=>{const h=Zs,m=ee,y=P;return g(),x(y,{title:"\u98DE\u673A\u7BA1\u7406",loading:_(n),class:"cursor-pointer",onClick:d[1]||(d[1]=u=>p.value=!0)},{"header-extra":c(()=>[e("span",en,C(_(r)),1)]),default:c(()=>[e("div",tn,[e("div",sn,[nn,e("div",on,[e("div",un,[an,e("div",ln,[e("span",cn,C(_(l).produce),1)]),e("div",rn,[e("span",dn,C(_(l).produceActive),1)])]),e("div",_n,[vn,e("div",pn,[e("span",mn,C(_(l).control),1)]),e("div",gn,[e("span",hn,C(_(l).controlActive),1)])]),e("div",fn,[yn,e("div",Cn,[e("span",Bn,C(_(l).monitor),1)]),e("div",Fn,[e("span",$n,C(_(l).monitorActive),1)])])])])]),s(m,{modelValue:_(p),"onUpdate:modelValue":d[0]||(d[0]=u=>ne(p)?p.value=u:null),title:"\u98DE\u673A\u7BA1\u7406",style:{width:"50vw",position:"fixed",left:"200px"}},{default:c(()=>[s(h)]),_:1},8,["modelValue"])]),_:1},8,["loading"])}}});var bn=H(En,[["__scopeId","data-v-394e07c9"]]);const xn={class:"row"},wn={class:"col-auto"},Dn={class:"col"},An=S({__name:"CompanyBrief",setup(t){const{data:n}=R(V.company,L,{revalidateOnFocus:!1});return(l,r)=>{const p=qe,i=P;return g(),x(i,{title:"\u4ECA\u65E5\u4EFB\u52A1",loading:!_(n)},{default:c(()=>[e("div",xn,[e("div",wn,[s(p,{src:"./images/1.png",width:"220",height:"200"})]),e("div",Dn,[s(ge,{class:"fit q-pl-md"},{default:c(()=>[k(" 1\u670826\u65E5\uFF0C\u662F\u8FD0-20\u9996\u98DE\u6210\u529F11\u5468\u5E74\u7684\u65E5\u5B50\u300211\u5E74\u95F4\uFF0C\u5B83\u4E0D\u8D1F\u671F\u5F85\uFF0C\u201C\u9CB2\u9E4F\u201D\u5C55\u7FC5\uFF0C\u594B\u98DE\u4E07\u91CC\u3002\u8FD0-20\u88AB\u8A89\u4E3A\u201C\u5927\u56FD\u9CB2\u9E4F\u201D\uFF0C\u662F\u6211\u56FD\u81EA\u4E3B\u7814\u53D1\u7684\u65B0\u4E00\u4EE3\u519B\u7528\u5927\u578B\u8FD0\u8F93\u673A\uFF0C\u5177\u6709\u822A\u7A0B\u8FDC\u3001\u8F7D\u91CD\u5927\u3001\u901F\u5EA6\u5FEB\u7B49\u7279\u70B9\u3002\u5982\u679C\u628A\u4E00\u4E2A\u56FD\u5BB6\u6BD4\u55BB\u6210\u5DE8\u4EBA\uFF0C\u7A7A\u4E2D\u8FD0\u8F93\u548C\u8FDC\u7A0B\u6295\u9001\u5C31\u662F\u8FD9\u4E2A\u5DE8\u4EBA\u201C\u5EF6\u5C55\u7684\u53CC\u81C2\u201D\uFF0C\u662F\u5927\u56FD\u7A7A\u519B\u7684\u57FA\u672C\u884C\u52A8\u6837\u5F0F\u548C\u6838\u5FC3\u80FD\u529B\u3002 ")]),_:1})])])]),_:1},8,["loading"])}}});const kn={},Sn={class:"col q-pa-md"},Tn={class:"row justify-between fit"},qn={class:"col-4 row full-height q-col-gutter-x-md"},zn={class:"col-auto column q-col-gutter-y-md full-height"},In={class:"col-4 full-width"},On={class:"col-4 full-width"},Mn={class:"col-4 full-width"},Hn={class:"col column q-col-gutter-y-md full-height"},Un={class:"col-4 full-width"},Nn={class:"col-4 full-width"},Yn={class:"col-4 full-width"},Rn={class:"col-4"},Vn={class:"col-4 row full-height q-col-gutter-x-md"},Ln={class:"col column q-col-gutter-y-md full-height"},jn={class:"col-4 full-width"},Pn={class:"col-4 full-width"},Qn={class:"col-4 full-width"},Wn={class:"col-auto column q-col-gutter-y-md full-height",style:{"min-width":"500px"}},Gn={class:"col-4 full-width"},Jn={class:"col-4 full-width"},Kn={class:"col-4 full-width"},Xn={class:"col-auto",style:{height:"80px"}};function Zn(t,n){const l=An,r=bn,p=Xe,i=Ze,d=Ps,h=Ge,m=We,y=Je,u=Ms,o=Vt,v=et,a=Mt,$=Ke,D=ft;return g(),x(ze,{class:"sigma-page fit column"},{default:c(()=>[e("div",Sn,[e("div",Tn,[e("div",qn,[e("div",zn,[e("div",In,[s(l)]),e("div",On,[s(r)]),e("div",Mn,[s(p)])]),e("div",Hn,[e("div",Un,[s(i)]),e("div",Nn,[s(d)]),e("div",Yn,[s(h)])])]),e("div",Rn,[s(m)]),e("div",Vn,[e("div",Ln,[e("div",jn,[s(y)]),e("div",Pn,[s(u)]),e("div",Qn,[s(o)])]),e("div",Wn,[e("div",Gn,[s(v)]),e("div",Jn,[s(a)]),e("div",Kn,[s($)])])])])]),e("div",Xn,[s(D)])]),_:1})}var io=H(kn,[["render",Zn],["__scopeId","data-v-30d25291"]]);export{io as default};
