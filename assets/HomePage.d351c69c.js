import{Q as he,N as De,_ as P,a as ge,b as ue,c as ae,d as fe,e as Ae,f as ye,u as Z,g as ee,h as ke,i as Se,j as Te,k as qe,l as ze}from"./QPage.78f76df2.js";import{$ as Ie,_ as Y,a0 as _e,O as R,Y as Be,R as V,S as L,P as M,a1 as Oe}from"./index.ec68dfd3.js";import{d as S,o as g,f as w,g as e,Q as G,a0 as J,j as s,l as c,q as k,t as y,k as _,ab as H,y as x,e as b,a1 as le,ac as Ce,ad as te,ae as se,c as C,af as Me,z as He,ag as X,C as Ee,v as Ue,F as Ne,L as Ye,h as z,w as ie,U as Re,D as Ve,ah as Le,ai as ne,G as je}from"./index.b71e64ab.js";import{_ as $e}from"./ButtonGroup.5e99ab46.js";import{_ as Fe,a as ce,b as xe,c as Pe,d as Qe,e as We}from"./OutletOverview.d77ea993.js";import{_ as Ge,a as Je,b as Ke}from"./RankWarning.3823a18f.js";import{_ as Xe,a as Ze,b as et}from"./OutletSourceList.5e87500c.js";import"./light.197bc1ec.js";const tt={class:"column"},st={class:"col row"},nt={class:"text-weight-bolder text-h6 text-center"},ot={class:"digit-font text-h5 q-ml-md"},ut={class:"row justify-end"},at={class:"col text-right text-weight-bold text-subtitle1"},lt={class:"col-auto text-center",style:{width:"30px"}},it={class:"col-auto home-bottom row justify-center items-end q-pb-md"},ct=S({__name:"BottomNav",setup(t){const n=[{title:"\u65E0\u7EC4\u7EC7\u76D1\u6D4B",children:[{name:"\u7A7A\u6C14\u8D28\u91CF\u5FAE\u7AD9\u6392\u884C",status:"success"},{name:"\u7A7A\u6C14\u8D28\u91CF\u5FAE\u7AD9\u53F0\u8D26",status:"success"}]},{title:"\u65E0\u7EC4\u7EC7\u6CBB\u7406\u8FC7\u7A0B",children:[{name:"\u6CBB\u7406\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]},{title:"\u65E0\u7EC4\u7EC7\u6CBB\u7406\u8FC7\u7A0B",children:[{name:"\u6CBB\u7406\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]},{title:"\u65E0\u7EC4\u7EC7\u6CBB\u7406\u8FC7\u7A0B",children:[{name:"\u6CBB\u7406\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]},{title:"\u65E0\u7EC4\u7EC7\u6CBB\u7406\u8FC7\u7A0B",children:[{name:"\u6CBB\u7406\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]}];return(l,d)=>{const p=Fe,i=Y,r=$e;return g(),w("div",tt,[e("div",st,[(g(),w(G,null,J(n,(m,h)=>e("div",{class:"col-auto",key:h},[s(_(Ie),{style:{width:"220px",height:"250px",margin:"0 -4px"}},{default:c(()=>[s(he,{class:"q-pa-md",style:{height:"230px"}},{default:c(()=>[e("div",nt,[k(y(m.title)+" ",1),e("span",ot,"0"+y(h+1),1)]),(g(!0),w(G,null,J(m.children,(B,u)=>(g(),w("div",{class:"",key:u},[e("div",ut,[e("div",at,y(B.name),1),e("div",lt,[s(p,{dot:"",type:B.status},null,8,["type"])])])]))),128))]),_:2},1024)]),_:2},1024)])),64))]),e("div",it,[s(r,null,{default:c(()=>[s(i,{round:"",type:"primary",style:{width:"100px"},onClick:d[0]||(d[0]=m=>l.$router.push({name:"\u65E0\u7EC4\u7EC7"}))},{default:c(()=>[k(" \u65E0\u7EC4\u7EC7 ")]),_:1}),s(i,{round:"",style:{width:"100px"}},{default:c(()=>[k(" \u6E05\u6D01\u8FD0\u8F93 ")]),_:1})]),_:1})])])}}});var rt=H(ct,[["__scopeId","data-v-fb62a0a2"]]);const dt={class:"row full-height items-end q-pb-xl"},_t={class:"col-4 row justify-end"},vt={class:"col-4 relative-position"},pt={class:"home-bottom-center"},mt={class:"footer-btn absolute-center"},ht={class:"col-4"},gt=S({__name:"HomeFooter",setup(t){const n=x(!1);return(l,d)=>{const p=rt,i=De,r=Y;return g(),w("div",dt,[e("div",_t,[s(_(_e),{style:{width:"300px",height:"30px"}})]),e("div",vt,[e("div",pt,[n.value?(g(),b(p,{key:0})):le("",!0)]),e("div",mt,[s(r,{circle:"",tertiary:"",type:"primary",size:"tiny",onClick:d[0]||(d[0]=m=>n.value=!n.value)},{icon:c(()=>[s(i,null,{default:c(()=>[s(Ce,{name:"settings_overscan"})]),_:1})]),_:1})])]),e("div",ht,[s(_(_e),{style:{width:"300px",height:"30px"}})])])}}});var ft=H(gt,[["__scopeId","data-v-e07e3826"]]);const be=t=>(te("data-v-0632262e"),t=t(),se(),t),yt={key:0,class:"fit text-weight-bold text-center row q-col-gutter-sm"},Bt={class:"col-auto",style:{width:"200px"}},Ct=be(()=>e("div",{class:"row text-info"},[e("div",{class:"col"},"\u8BBE\u5907\u7C7B\u578B"),e("div",{class:"col"},"\u5728\u7EBF/\u603B\u6570")],-1)),Et={class:"device-table"},$t={class:"col"},Ft={class:"col"},xt={class:"text-primary text-weight-bold"},bt={class:"text-primary"},wt={class:"text-warning"},Dt={class:"col"},At=be(()=>e("div",{class:"row text-info"},[e("div",{class:"col"},"\u6307\u6807"),e("div",{class:"col"},"\u5355\u4F4D"),e("div",{class:"col"},"\u5E73\u5747\u503C"),e("div",{class:"col"},"\u6700\u5927\u503C"),e("div",{class:"col"},"\u6700\u5C0F\u503C")],-1)),kt={class:"device-table"},St={class:"col"},Tt={class:"col simple-font"},qt={class:"col simple-font text-info"},zt={class:"col simple-font text-primary"},It={class:"col simple-font text-positive"},Ot=S({__name:"UnorganizeMonitor",setup(t){const{data:n}=R(V.unoCount,L,{revalidateOnFocus:!1});return(l,d)=>{const p=P;return g(),b(p,{title:"\u65E0\u7EC4\u7EC7\u76D1\u63A7\u6570\u636E"},{default:c(()=>[_(n)?(g(),w("div",yt,[e("div",Bt,[Ct,e("div",Et,[(g(!0),w(G,null,J(_(n).left,i=>(g(),w("div",{class:"row",key:i.name},[e("div",$t,y(i.name),1),e("div",Ft,[e("span",xt,[e("span",bt,y(i.online),1),k(" / "),e("span",wt,y(i.total),1)])])]))),128))])]),e("div",Dt,[At,e("div",kt,[(g(!0),w(G,null,J(_(n).right,i=>(g(),w("div",{class:"row",key:i.name},[e("div",St,y(i.name),1),e("div",Tt,y(i.unit),1),e("div",qt,y(i.avg.toFixed(2)),1),e("div",zt,y(i.max.toFixed(2)),1),e("div",It,y(i.min.toFixed(2)),1)]))),128))])])])):(g(),b(_(Be),{key:1,class:"fit"}))]),_:1})}}});var Mt=H(Ot,[["__scopeId","data-v-0632262e"]]);const Ht={ratio:[String,Number]};function Ut(t,n){return C(()=>{const l=Number(t.ratio||(n!==void 0?n.value:void 0));return isNaN(l)!==!0&&l>0?{paddingBottom:`${100/l}%`}:null})}function ve(){let t=null;const n=Ee();function l(){t!==null&&(clearTimeout(t),t=null)}return Me(l),He(l),{removeTimeout:l,registerTimeout(d,p){l(),X(n)===!1&&(t=setTimeout(()=>{t=null,d()},p))}}}const Nt=1.7778;var pe=Ue({name:"QImg",props:{...Ht,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Nt},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(t,{slots:n,emit:l}){const d=x(t.initialRatio),p=Ut(t,d),i=Ee(),{registerTimeout:r,removeTimeout:m}=ve(),{registerTimeout:h,removeTimeout:B}=ve(),u=C(()=>t.placeholderSrc!==void 0?{src:t.placeholderSrc}:null),o=C(()=>t.errorSrc!==void 0?{src:t.errorSrc,__qerror:!0}:null),v=[x(null),x(u.value)],a=x(0),$=x(!1),D=x(!1),E=C(()=>`q-img q-img--${t.noNativeMenu===!0?"no-":""}menu`),F=C(()=>({width:t.width,height:t.height})),T=C(()=>`q-img__image ${t.imgClass!==void 0?t.imgClass+" ":""}q-img__image--with${t.noTransition===!0?"out":""}-transition q-img__image--`),U=C(()=>({...t.imgStyle,objectFit:t.fit,objectPosition:t.position}));function I(){if(B(),t.loadingShowDelay===0){$.value=!0;return}h(()=>{$.value=!0},t.loadingShowDelay)}function O(){B(),$.value=!1}function W({target:f}){X(i)===!1&&(m(),d.value=f.naturalHeight===0?.5:f.naturalWidth/f.naturalHeight,j(f,1))}function j(f,N){N===1e3||X(i)===!0||(f.complete===!0?A(f):r(()=>{j(f,N+1)},50))}function A(f){X(i)!==!0&&(a.value=a.value^1,v[a.value].value=null,O(),f.getAttribute("__qerror")!=="true"&&(D.value=!1),l("load",f.currentSrc||f.src))}function q(f){m(),O(),D.value=!0,v[a.value].value=o.value,v[a.value^1].value=u.value,l("error",f)}function de(f){const N=v[f].value,K={key:"img_"+f,class:T.value,style:U.value,alt:t.alt,crossorigin:t.crossorigin,decoding:t.decoding,referrerpolicy:t.referrerpolicy,height:t.height,width:t.width,loading:t.loading,fetchpriority:t.fetchpriority,"aria-hidden":"true",draggable:t.draggable,...N};return a.value===f?Object.assign(K,{class:K.class+"current",onLoad:W,onError:q}):K.class+="loaded",z("div",{class:"q-img__container absolute-full",key:"img"+f},z("img",K))}function we(){return $.value===!1?z("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Ve(n[D.value===!0?"error":"default"])):z("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},n.loading!==void 0?n.loading():t.noSpinner===!0?void 0:[z(Le,{color:t.spinnerColor,size:t.spinnerSize})])}{let f=function(){ie(()=>t.src||t.srcset||t.sizes?{src:t.src,srcset:t.srcset,sizes:t.sizes}:null,N=>{m(),D.value=!1,N===null?(O(),v[a.value^1].value=u.value):I(),v[a.value].value=N},{immediate:!0})};Ne.value===!0?Ye(f):f()}return()=>{const f=[];return p.value!==null&&f.push(z("div",{key:"filler",style:p.value})),v[0].value!==null&&f.push(de(0)),v[1].value!==null&&f.push(de(1)),f.push(z(Re,{name:"q-transition--fade"},we)),z("div",{key:"main",class:E.value,style:F.value,role:"img","aria-label":t.alt},f)}}}),me="./assets/company.e14e5d37.png";const Yt=e("span",{class:"text-info cursor-pointer",style:{"font-weight":"lighter"}}," \u67E5\u770B\u5168\u90E8 ",-1),Rt={class:"row fit items-center q-gutter-x-sm"},Vt=S({__name:"MonitorArea",setup(t){return(n,l)=>{const d=P;return g(),b(d,{title:"\u91CD\u70B9\u533A\u57DF\u76D1\u63A7"},{"header-extra":c(()=>[Yt]),default:c(()=>[e("div",Rt,[s(pe,{src:_(me),class:"col"},null,8,["src"]),s(pe,{src:_(me),class:"col"},null,8,["src"])])]),_:1})}}});function Lt(t){const n=C(()=>`${V.cleaner}/${t.value.deviceId}/${t.value.range}?time_start=${t.value.time_start}&time_end=${t.value.time_end}`),{data:l}=R(n,L,{revalidateOnFocus:!1,dedupingInterval:1e3*60*60*24});return{cleanerEvents:C(()=>l.value||[])}}const jt={class:"event-table"},Pt=e("div",{class:"sigma-title2"},"\u57FA\u672C\u4FE1\u606F",-1),Qt={class:"row"},Wt={class:"col"},Gt=e("span",null,"\u4F4D\u7F6E:",-1),Jt={class:"q-ml-sm text-info"},Kt={class:"col"},Xt=e("span",null,"\u4ECA\u65E5\u6D17\u8F66\u6B21\u6570:",-1),Zt={class:"q-ml-sm text-info"},es={class:"col"},ts=e("span",null,"\u6628\u65E5\u6D17\u8F66\u6B21\u6570:",-1),ss={class:"q-ml-sm text-info"},ns={class:"col"},os=e("span",null,"\u5B89\u88C5\u4F7F\u7528\u65F6\u95F4:",-1),us={class:"q-ml-sm text-info"},as={class:"col"},ls=e("span",null,"\u98CE\u5E72\u8BBE\u65BD:",-1),is={class:"q-ml-sm text-info"},cs={class:"col"},rs=e("span",null,"\u6296\u6C34\u88C5\u7F6E:",-1),ds={class:"q-ml-sm text-info"},_s={class:"col"},vs=e("span",null,"\u6C61\u6C34\u5904\u7406\u88C5\u7F6E:",-1),ps={class:"q-ml-sm text-info"},ms=e("div",{class:"sigma-title2"},"\u6CBB\u7406\u8BB0\u5F55",-1),hs=S({__name:"CleanerEventTable",props:{cleaner:{},height:{}},setup(t){const n=t,l=x(null),d=E=>({style:{cursor:"pointer"},onClick:()=>{l.value=E}}),p=[{title:"\u5E8F\u53F7",key:"id",align:"center",render:function(E,F){return F+1}},{title:"\u8F66\u724C\u53F7",key:"car_id",align:"center"},{title:"\u5F00\u59CB\u65F6\u95F4",key:"time_start",align:"center"},{title:"\u6D17\u8F66\u65F6\u957F",key:"seconds",align:"center",render(E){return E.seconds+"\u79D2"}},{title:"\u7ED3\u675F\u65F6\u95F4",key:"time_end",align:"center"},{title:"\u5E73\u5747\u6C34\u538B",key:"pressure",align:"center",render(E){return E.pressure.toFixed(2)+" MPa"}}],i=C(()=>({pageSize:20,size:"small",suffix:()=>"\u5171"+v.value.length+"\u6761",showQuickJumper:!0})),r=x("default"),m=[{label:"\u9ED8\u8BA4",value:"default"},{label:"\u65E5",value:"day"},{label:"\u5468",value:"week"},{label:"\u6708",value:"month"}],h=x([M().subtract(1,"day").valueOf(),M().valueOf()]),B=C(()=>M(h.value[0]).format("YYYY-MM-DD HH")+":00:00"),u=C(()=>M(h.value[1]).format("YYYY-MM-DD HH")+":00:00"),o=x({deviceId:n.cleaner.id,range:r.value,time_start:B.value,time_end:u.value}),{cleanerEvents:v}=Lt(o);function a(){o.value={deviceId:n.cleaner.id,range:r.value,time_start:B.value,time_end:u.value}}function $(){r.value="default",h.value=[M().subtract(1,"day").valueOf(),M().valueOf()],o.value={deviceId:n.cleaner.id,range:r.value,time_start:B.value,time_end:u.value}}function D(E){return E>Date.now()}return(E,F)=>{const T=ae,U=fe,I=Ae,O=Y,W=ye,j=ge,A=ue;return g(),w("div",jt,[Pt,e("div",Qt,[e("div",Wt,[Gt,e("span",Jt,y(E.cleaner.name),1)]),e("div",Kt,[Xt,e("span",Zt,y(E.cleaner.today),1)]),e("div",es,[ts,e("span",ss,y(E.cleaner.yesterday),1)]),e("div",ns,[os,e("span",us,y(E.cleaner.date),1)]),e("div",as,[ls,e("span",is,y(E.cleaner.dry?"\u6709":"\u65E0"),1)]),e("div",cs,[rs,e("span",ds,y(E.cleaner.shake?"\u6709":"\u65E0"),1)]),e("div",_s,[vs,e("span",ps,y(E.cleaner.sewage?"\u6709":"\u65E0"),1)])]),ms,s(j,{"label-placement":"left",size:"small",class:"q-my-md"},{default:c(()=>[s(W,{cols:24,"x-gap":16},{default:c(()=>[s(U,{span:3,label:"\u65F6\u95F4\u7EF4\u5EA6:","label-style":"color:#98f2fd"},{default:c(()=>[s(T,{value:r.value,"onUpdate:value":F[0]||(F[0]=q=>r.value=q),options:m},null,8,["value"])]),_:1}),s(U,{span:10,label:"\u8D77\u6B62\u65F6\u95F4:","label-style":"color:#98f2fd"},{default:c(()=>[r.value==="default"?(g(),b(I,{key:0,value:h.value,"onUpdate:value":F[1]||(F[1]=q=>h.value=q),type:"datetimerange","is-date-disabled":D},null,8,["value"])):r.value==="day"?(g(),b(I,{key:1,value:h.value[0],"onUpdate:value":F[2]||(F[2]=q=>h.value[0]=q),type:"date","is-date-disabled":D},null,8,["value"])):r.value==="week"?(g(),b(I,{key:2,value:h.value,"onUpdate:value":F[3]||(F[3]=q=>h.value=q),type:"daterange","is-date-disabled":D},null,8,["value"])):(g(),b(I,{key:3,value:h.value[0],"onUpdate:value":F[4]||(F[4]=q=>h.value[0]=q),type:"month","is-date-disabled":D},null,8,["value"]))]),_:1}),s(U,{span:10},{default:c(()=>[s(O,{type:"info",size:"small",onClick:a},{default:c(()=>[k(" \u67E5\u8BE2 ")]),_:1}),s(O,{type:"info",size:"small",class:"q-mx-md",onClick:$},{default:c(()=>[k(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1}),s(A,{columns:p,"row-props":d,data:_(v),pagination:i.value,"max-height":E.height||300,striped:"",class:"sigma-table"},null,8,["data","pagination","max-height"])])}}});function gs(){const{data:t}=R(V.cleaner,L,{revalidateOnFocus:!1,dedupingInterval:36e5});return{cleaners:C(()=>t.value||[])}}const fs=S({__name:"CleanerTable",props:{height:{}},setup(t){const{cleaners:n}=gs(),l=x(null),d=h=>({style:{cursor:"pointer"},onClick:()=>{l.value=h,m()}}),p=[{title:"\u5E8F\u53F7",key:"id",align:"center",render:function(h,B){return B+1}},{title:"\u4F4D\u7F6E\u540D\u79F0",key:"name",align:"center"},{title:"\u4ECA\u65E5\u6D17\u8F66\u6B21\u6570",key:"today",align:"center"},{title:"\u6628\u65E5\u6D17\u8F66\u6B21\u6570",key:"yesterday",align:"center"},{title:"\u7D2F\u8BA1\u6D17\u8F66\u6B21\u6570",key:"count",align:"center"},{title:"\u5B89\u88C5\u4F7F\u7528\u65F6\u95F4",key:"date",align:"center"}],i=C(()=>({pageSize:20,size:"small",suffix:()=>"\u5171"+n.value.length+"\u6761",showQuickJumper:!0})),{bool:r,setTrue:m}=Z();return(h,B)=>{const u=ue,o=hs,v=ee;return g(),w("div",null,[s(u,{columns:p,"row-props":d,data:_(n),pagination:i.value,"max-height":h.height||300,striped:"",class:"sigma-table"},null,8,["data","pagination","max-height"]),l.value?(g(),b(v,{key:0,modelValue:_(r),"onUpdate:modelValue":B[0]||(B[0]=a=>ne(r)?r.value=a:null),title:"\u6D17\u8F66\u673A\u8FD0\u884C\u53F0\u8D26",style:{width:"50vw"}},{default:c(()=>[s(o,{cleaner:l.value},null,8,["cleaner"])]),_:1},8,["modelValue"])):le("",!0)])}}});const Q=t=>(te("data-v-960c095c"),t=t(),se(),t),ys={class:"row fit items-center"},Bs={class:"col-6"},Cs={class:"row text-center"},Es={class:"col-6"},$s=Q(()=>e("div",{class:"wash-bottom"},null,-1)),Fs={class:"col-6"},xs={class:"tape-font sigma-digit text-primary"},bs=Q(()=>e("div",{class:"text-warning"},"\u6D17\u8F66\u673A\u603B\u6570",-1)),ws={class:"col-6 text-center"},Ds={class:"sigma-underline"},As=Q(()=>e("span",{class:"text-primary"},"\u4ECA\u65E5\u6D17\u8F66",-1)),ks={class:"text-primary tape-font sigma-digit"},Ss=Q(()=>e("span",{class:"text-primary"},"\u6B21",-1)),Ts={class:"sigma-underline"},qs=Q(()=>e("span",{class:"text-primary"},"\u672C\u5468\u6D17\u8F66",-1)),zs={class:"text-warning tape-font sigma-digit"},Is=Q(()=>e("span",{class:"text-primary"},"\u6B21",-1)),Os=S({__name:"WashCount",setup(t){const{data:n}=R(V.washCount,L,{revalidateOnFocus:!0}),{bool:l,setTrue:d}=Z();return(p,i)=>{const r=ce,m=fs,h=ee,B=P;return g(),b(B,{title:"\u6D17\u8F66\u673A\u52A8\u6001",loading:!_(n),class:"cursor-pointer",onClick:_(d)},{default:c(()=>{var u,o,v;return[e("div",ys,[e("div",Bs,[e("div",Cs,[e("div",Es,[s(Ce,{name:"local_car_wash",size:"48px",color:"primary"}),$s]),e("div",Fs,[e("div",null,[e("span",xs,[s(r,{from:0,to:(u=_(n))==null?void 0:u.deviceCount},null,8,["to"])]),k(" \u53F0 ")]),bs])])]),e("div",ws,[e("div",Ds,[As,e("span",ks,[s(r,{from:0,to:(o=_(n))==null?void 0:o.day},null,8,["to"])]),Ss]),e("div",Ts,[qs,e("span",zs,[s(r,{from:0,to:(v=_(n))==null?void 0:v.week},null,8,["to"])]),Is])])]),s(h,{modelValue:_(l),"onUpdate:modelValue":i[0]||(i[0]=a=>ne(l)?l.value=a:null),title:"\u6D17\u8F66\u673A\u8FD0\u884C\u53F0\u8D26",style:{width:"50vw"}},{default:c(()=>[s(m)]),_:1},8,["modelValue"])]}),_:1},8,["loading","onClick"])}}});var Ms=H(Os,[["__scopeId","data-v-960c095c"]]);const Hs=t=>(te("data-v-43e1af51"),t=t(),se(),t),Us={key:0,class:"fit row"},Ns={class:"col full-height"},Ys={class:"col-auto full-height text-center column justify-center right-side"},Rs={class:"text-grey"},Vs={class:"text-primary digit-font total-digit"},Ls=Hs(()=>e("div",{class:"text-grey"},"\u5C0F\u65F6",-1)),js=S({__name:"DeviceHourChart",setup(t){const n=x("year"),l=x("1"),d=[{label:"\u751F\u4EA7\u8BBE\u5907",value:"1"},{label:"\u6CBB\u7406\u8BBE\u5907",value:"2"},{label:"\u76D1\u6D4B\u8BBE\u5907",value:"3"}],p=C(()=>V.deviceHours+n.value+"/"+l.value),{data:i}=R(p,L,{revalidateOnFocus:!1,dedupingInterval:1e3*60*5}),r=C(()=>i.value?i.value.y.reduce((u,o)=>u+o,0):0),m=C(()=>n.value==="day"?"\u65E5\u7D2F\u8BA1":n.value==="week"?"\u5468\u7D2F\u8BA1":n.value==="month"?"\u6708\u7D2F\u8BA1":"\u5E74\u7D2F\u8BA1"),h=C(()=>{var u,o;return{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:(u=i.value)==null?void 0:u.x}],yAxis:[{type:"value",name:"\u5355\u4F4D: h"}],series:[{type:"bar",itemStyle:{color:new Se.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(242, 164, 129)"},{offset:1,color:"rgb(43, 116, 255)"}])},data:(o=i.value)==null?void 0:o.y}]}}),{domRef:B}=ke(h);return(u,o)=>{const v=Y,a=$e,$=ae,D=xe,E=ce,F=P;return g(),b(F,{title:"\u8BBE\u5907\u8FD0\u884C\u65F6\u957F\u7EDF\u8BA1"},{"header-extra":c(()=>[s(D,null,{default:c(()=>[s(a,{size:"tiny"},{default:c(()=>[s(v,{type:n.value==="day"?"primary":"default",onClick:o[0]||(o[0]=T=>n.value="day")},{default:c(()=>[k(" \u65E5 ")]),_:1},8,["type"]),s(v,{type:n.value==="week"?"primary":"default",onClick:o[1]||(o[1]=T=>n.value="week")},{default:c(()=>[k(" \u5468 ")]),_:1},8,["type"]),s(v,{type:n.value==="month"?"primary":"default",onClick:o[2]||(o[2]=T=>n.value="month")},{default:c(()=>[k(" \u6708 ")]),_:1},8,["type"]),s(v,{type:n.value==="year"?"primary":"default",onClick:o[3]||(o[3]=T=>n.value="year")},{default:c(()=>[k(" \u5E74 ")]),_:1},8,["type"])]),_:1}),s($,{size:"tiny",value:l.value,"onUpdate:value":o[4]||(o[4]=T=>l.value=T),options:d,"consistent-menu-width":!1},null,8,["value"])]),_:1})]),default:c(()=>[_(i)?(g(),w("div",Us,[e("div",Ns,[e("div",{class:"fit",ref_key:"chartRef",ref:B},null,512)]),e("div",Ys,[e("div",Rs,y(m.value),1),s(_(Oe),{style:{width:"160px",height:"40px"}},{default:c(()=>[e("div",Vs,[s(E,{from:0,to:r.value},null,8,["to"])])]),_:1}),Ls])])):(g(),b(_(Be),{key:1}))]),_:1})}}});var Ps=H(js,[["__scopeId","data-v-43e1af51"]]);function re(){const{data:t}=R(V.devices,L,{revalidateOnFocus:!1,dedupingInterval:864e5}),n=x(M().format("YYYY-MM-DD HH:mm:ss"));ie(()=>t,()=>{n.value=M().format("YYYY-MM-DD HH:mm:ss")});const l=C(()=>!t.value),d=C(()=>t.value?t.value:[]),p=C(()=>{var o;return(o=d.value)==null?void 0:o.filter(v=>v.status==="\u5728\u7EBF")}),i=C(()=>({total:d.value.length,monitor:d.value.filter(o=>o.class==="\u76D1\u6D4B\u8BBE\u5907").length,monitorActive:p.value.filter(o=>o.class==="\u76D1\u6D4B\u8BBE\u5907").length,control:d.value.filter(o=>o.class==="\u6CBB\u7406\u8BBE\u5907").length,controlActive:p.value.filter(o=>o.class==="\u6CBB\u7406\u8BBE\u5907").length,produce:d.value.filter(o=>o.class==="\u751F\u4EA7\u8BBE\u5907").length,produceActive:p.value.filter(o=>o.class==="\u751F\u4EA7\u8BBE\u5907").length})),r=C(()=>{const o=new Set;d.value.forEach(a=>{o.add(a.department)});const v=[{label:"\u5168\u90E8",value:"\u5168\u90E8"}];return o.forEach(a=>{v.push({label:a,value:a})}),v}),m=C(()=>{const o=new Set;d.value.forEach(a=>{o.add(a.type)});const v=[{label:"\u5168\u90E8",value:"\u5168\u90E8"}];return o.forEach(a=>{v.push({label:a,value:a})}),v}),h=C(()=>{const o=new Set;d.value.forEach(a=>{o.add(a.status)});const v=[{label:"\u5168\u90E8",value:"\u5168\u90E8"}];return o.forEach(a=>{v.push({label:a,value:a})}),v}),B=[{label:"\u5168\u90E8",value:"\u5168\u90E8"},{label:"\u751F\u4EA7\u8BBE\u5907",value:"\u751F\u4EA7\u8BBE\u5907"},{label:"\u6CBB\u7406\u8BBE\u5907",value:"\u6CBB\u7406\u8BBE\u5907"},{label:"\u76D1\u6D4B\u8BBE\u5907",value:"\u76D1\u6D4B\u8BBE\u5907"}],u=C(()=>({departmentOptions:r.value,deviceTypeOptions:m.value,deviceStatusOptions:h.value,deviceClassOptions:B}));return{devices:d,loading:l,deviceCount:i,datetime:n,options:u}}const Qs={class:"row full-height q-py-md"},Ws={class:"col-auto sigma-number"},Gs={class:"col text-info"},Js=S({__name:"DeviceTableTop",setup(t){const{deviceCount:n}=re(),l=C(()=>[{title:"\u5168\u573A\u8BBE\u5907\u603B\u6570",value:n.value.total},{title:"\u76D1\u6D4B\u8BBE\u5907\u603B\u6570",value:n.value.monitor},{title:"\u6CBB\u7406\u8BBE\u5907\u603B\u6570",value:n.value.control},{title:"\u751F\u4EA7\u8BBE\u5907\u603B\u6570",value:n.value.produce}]);return(d,p)=>{const i=ce,r=Pe;return g(),b(r,null,{default:c(()=>[e("div",Qs,[(g(!0),w(G,null,J(l.value,m=>(g(),w("div",{class:"col-3 full-height column items-center item",key:m.title},[e("div",Ws,[s(i,{from:0,to:m.value},null,8,["to"])]),e("div",Gs,y(m.title),1)]))),128))])]),_:1})}}});var Ks=H(Js,[["__scopeId","data-v-64ae74ca"]]);const Xs={class:"q-px-lg"},Zs=S({__name:"DeviceTable",setup(t){const{bool:n,setTrue:l}=Z(),{devices:d,loading:p,options:i}=re(),r=x(d.value),m=x(null);ie(()=>p.value,a=>{a||(r.value=d.value)});const h=[{title:"\u5E8F\u53F7",key:"index",align:"center"},{title:"\u5206\u5382/\u6240\u5C5E\u533A\u57DF",key:"department"},{title:"\u8BBE\u5907\u7F16\u7801",key:"code"},{title:"\u8BBE\u5907\u540D\u79F0",key:"name"},{title:"\u8BBE\u5907\u7C7B\u522B",key:"class"},{title:"\u8BBE\u5907\u7C7B\u578B",key:"type"},{title:"\u8BBE\u5907\u72B6\u6001",key:"status",render:function(a){return z(xe,{},()=>[z(Fe,{type:a.status==="\u5728\u7EBF"||a.status==="\u8FD0\u884C"?"success":"error",dot:!0}),a.status])}},{title:"\u64CD\u4F5C",key:"id",align:"center",render:function(a){return z(Y,{tertiary:!0,size:"tiny",type:"info",onClick:()=>{m.value=a,l()}},()=>"\u67E5\u770B\u8BE6\u60C5")}}],B={department:"\u5168\u90E8",deviceClass:"\u5168\u90E8",deviceType:"\u5168\u90E8",status:"\u5168\u90E8",code:""},u=je({...B});function o(){Object.assign(u,B),r.value=d.value}function v(){r.value=d.value.filter(a=>(u.department==="\u5168\u90E8"||a.department===u.department)&&(u.deviceClass==="\u5168\u90E8"||a.class===u.deviceClass)&&(u.deviceType==="\u5168\u90E8"||a.type===u.deviceType)&&(u.status==="\u5168\u90E8"||a.status===u.status)&&(u.code===""||a.code.includes(u.code)||a.name.includes(u.code)))}return(a,$)=>{const D=Ks,E=ae,F=fe,T=Te,U=ye,I=ge,O=ue,W=Qe,j=ee;return g(),w("div",Xs,[s(D),s(I,{class:"q-mt-sm",model:u,"label-placement":"left",size:"small"},{default:c(()=>[s(U,{cols:24,"x-gap":16},{default:c(()=>[s(F,{span:6,label:"\u5206\u5382/\u6240\u5C5E\u533A\u57DF:",path:"department"},{default:c(()=>[s(E,{value:u.department,"onUpdate:value":$[0]||($[0]=A=>u.department=A),filterable:"",options:_(i).departmentOptions},null,8,["value","options"])]),_:1}),s(F,{span:6,label:"\u8BBE\u5907\u7C7B\u522B:",path:"deviceClass"},{default:c(()=>[s(E,{value:u.deviceClass,"onUpdate:value":$[1]||($[1]=A=>u.deviceClass=A),filterable:"",options:_(i).deviceClassOptions},null,8,["value","options"])]),_:1}),s(F,{span:6,label:"\u8BBE\u5907\u7C7B\u578B:",path:"deviceType"},{default:c(()=>[s(E,{value:u.deviceType,"onUpdate:value":$[2]||($[2]=A=>u.deviceType=A),filterable:"",options:_(i).deviceTypeOptions},null,8,["value","options"])]),_:1}),s(F,{span:6,label:"\u8BBE\u5907\u72B6\u6001:",path:"status"},{default:c(()=>[s(E,{value:u.status,"onUpdate:value":$[3]||($[3]=A=>u.status=A),filterable:"",options:_(i).deviceStatusOptions},null,8,["value","options"])]),_:1}),s(F,{span:6,label:"\u8BBE\u5907\u7F16\u7801/\u540D\u79F0:",path:"code"},{default:c(()=>[s(T,{value:u.code,"onUpdate:value":$[4]||($[4]=A=>u.code=A),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["value"])]),_:1}),s(F,null,{default:c(()=>[s(_(Y),{type:"info",strong:"",secondary:"",onClick:v},{default:c(()=>[k(" \u67E5\u8BE2 ")]),_:1}),s(_(Y),{class:"q-ml-sm",type:"info",strong:"",secondary:"",onClick:o},{default:c(()=>[k(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),s(O,{columns:h,data:r.value,pagination:!1,loading:_(p),"max-height":250,"virtual-scroll":"",striped:"",size:"small",class:"sigma-table"},null,8,["data","loading"]),m.value?(g(),b(j,{key:0,modelValue:_(n),"onUpdate:modelValue":$[5]||($[5]=A=>ne(n)?n.value=A:null),title:m.value.class+"\u8FD0\u884C\u60C5\u51B5",style:{width:"50vw"}},{default:c(()=>[s(W,{device:m.value},null,8,["device"])]),_:1},8,["modelValue","title"])):le("",!0)])}}});const oe=t=>(te("data-v-78dd2081"),t=t(),se(),t),en={class:"text-primary text-subtitle1"},tn={class:"fit q-pt-lg"},sn={class:"text-weight-bold text-center"},nn=oe(()=>e("div",{class:"row text-info"},[e("div",{class:"col"}),e("div",{class:"col"},"\u603B\u6570(\u53F0)"),e("div",{class:"col"},"\u5F00\u542F/\u5728\u7EBF(\u53F0)")],-1)),on={class:"device-table"},un={class:"row"},an=oe(()=>e("div",{class:"col text-info"},"\u751F\u4EA7\u8BBE\u5907",-1)),ln={class:"col"},cn={class:"text-warning text-weight-bold digit-font",style:{"font-size":"24px"}},rn={class:"col"},dn={class:"text-primary text-weight-bold digit-font",style:{"font-size":"24px"}},_n={class:"row"},vn=oe(()=>e("div",{class:"col text-warning"},"\u6CBB\u7406\u8BBE\u5907",-1)),pn={class:"col"},mn={class:"text-warning text-weight-bold digit-font",style:{"font-size":"24px"}},hn={class:"col"},gn={class:"text-primary text-weight-bold digit-font",style:{"font-size":"24px"}},fn={class:"row"},yn=oe(()=>e("div",{class:"col text-primary"},"\u76D1\u6D4B\u8BBE\u5907",-1)),Bn={class:"col"},Cn={class:"text-warning text-weight-bold digit-font",style:{"font-size":"24px"}},En={class:"col"},$n={class:"text-primary text-weight-bold digit-font",style:{"font-size":"24px"}},Fn=S({__name:"DeviceCount",setup(t){const{loading:n,deviceCount:l,datetime:d}=re(),{bool:p}=Z();return(i,r)=>{const m=Zs,h=ee,B=P;return g(),b(B,{title:"\u5168\u5382\u8BBE\u5907\u7BA1\u7406",loading:_(n),class:"cursor-pointer",onClick:r[1]||(r[1]=u=>p.value=!0)},{"header-extra":c(()=>[e("span",en,y(_(d)),1)]),default:c(()=>[e("div",tn,[e("div",sn,[nn,e("div",on,[e("div",un,[an,e("div",ln,[e("span",cn,y(_(l).produce),1)]),e("div",rn,[e("span",dn,y(_(l).produceActive),1)])]),e("div",_n,[vn,e("div",pn,[e("span",mn,y(_(l).control),1)]),e("div",hn,[e("span",gn,y(_(l).controlActive),1)])]),e("div",fn,[yn,e("div",Bn,[e("span",Cn,y(_(l).monitor),1)]),e("div",En,[e("span",$n,y(_(l).monitorActive),1)])])])])]),s(h,{modelValue:_(p),"onUpdate:modelValue":r[0]||(r[0]=u=>ne(p)?p.value=u:null),title:"\u5168\u5382\u8BBE\u5907\u7BA1\u7406",style:{width:"50vw",position:"fixed",left:"200px"}},{default:c(()=>[s(m)]),_:1},8,["modelValue"])]),_:1},8,["loading"])}}});var xn=H(Fn,[["__scopeId","data-v-78dd2081"]]);const bn={class:"row"},wn={class:"col-auto"},Dn={class:"col"},An=S({__name:"CompanyBrief",setup(t){const{data:n}=R(V.company,L,{revalidateOnFocus:!1});return(l,d)=>{const p=qe,i=P;return g(),b(i,{title:"\u4F01\u4E1A\u7B80\u4ECB",loading:!_(n)},{default:c(()=>{var r;return[e("div",bn,[e("div",wn,[s(p,{src:(r=_(n))==null?void 0:r.image,width:"220",height:"200"},null,8,["src"])]),e("div",Dn,[s(he,{class:"fit q-pl-md"},{default:c(()=>{var m;return[k(y((m=_(n))==null?void 0:m.company),1)]}),_:1})])])]}),_:1},8,["loading"])}}});const kn={},Sn={class:"col q-pa-md"},Tn={class:"row justify-between fit"},qn={class:"col-4 row full-height q-col-gutter-x-md"},zn={class:"col-auto column q-col-gutter-y-md full-height"},In={class:"col-4 full-width"},On={class:"col-4 full-width"},Mn={class:"col-4 full-width"},Hn={class:"col column q-col-gutter-y-md full-height"},Un={class:"col-4 full-width"},Nn={class:"col-4 full-width"},Yn={class:"col-4 full-width"},Rn={class:"col-4"},Vn={class:"col-4 row full-height q-col-gutter-x-md"},Ln={class:"col column q-col-gutter-y-md full-height"},jn={class:"col-4 full-width"},Pn={class:"col-4 full-width"},Qn={class:"col-4 full-width"},Wn={class:"col-auto column q-col-gutter-y-md full-height",style:{"min-width":"500px"}},Gn={class:"col-4 full-width"},Jn={class:"col-4 full-width"},Kn={class:"col-4 full-width"},Xn={class:"col-auto",style:{height:"80px"}};function Zn(t,n){const l=An,d=xn,p=Xe,i=Ze,r=Ps,m=Ge,h=We,B=Je,u=Ms,o=Vt,v=et,a=Mt,$=Ke,D=ft;return g(),b(ze,{class:"sigma-page fit column"},{default:c(()=>[e("div",Sn,[e("div",Tn,[e("div",qn,[e("div",zn,[e("div",In,[s(l)]),e("div",On,[s(d)]),e("div",Mn,[s(p)])]),e("div",Hn,[e("div",Un,[s(i)]),e("div",Nn,[s(r)]),e("div",Yn,[s(m)])])]),e("div",Rn,[s(h)]),e("div",Vn,[e("div",Ln,[e("div",jn,[s(B)]),e("div",Pn,[s(u)]),e("div",Qn,[s(o)])]),e("div",Wn,[e("div",Gn,[s(v)]),e("div",Jn,[s(a)]),e("div",Kn,[s($)])])])])]),e("div",Xn,[s(D)])]),_:1})}var io=H(kn,[["render",Zn],["__scopeId","data-v-30d25291"]]);export{io as default};
