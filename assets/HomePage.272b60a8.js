import{Q as de,N as Ce,_ as j,a as re,b as se,c as ne,d as ve,e as Ee,f as pe,u as J,g as K,h as $e,i as Fe,j as xe,k as be,l as we}from"./QPage.b44bf96e.js";import{$ as De,_ as H,a0 as ie,O as U,Y as me,R as Y,S as N,P as I,a1 as Ae}from"./index.e982ccec.js";import{d as S,o as f,f as w,g as e,Q as L,a0 as W,j as t,l as i,q as A,t as C,k as v,ab as M,y as x,e as b,a1 as ue,ac as fe,ad as X,ae as Z,c as E,v as ke,w as oe,z as Se,h as T,U as qe,D as Te,af as ze,ag as ee,G as Oe}from"./index.beb44c88.js";import{_ as he}from"./ButtonGroup.b613395c.js";import{_ as ge,a as le,b as ye,c as Ie,d as Me,e as He}from"./OutletOverview.f7e3ca04.js";import{_ as Ue,a as Ye,b as Ne}from"./RankWarning.16bd4c0b.js";import{_ as Ve,a as Re,b as je}from"./OutletSourceList.21557c5e.js";import"./light.bf4019a8.js";const Pe={class:"column"},Qe={class:"col row"},Le={class:"text-weight-bolder text-h6 text-center"},We={class:"digit-font text-h5 q-ml-md"},Ge={class:"row justify-end"},Je={class:"col text-right text-weight-bold text-subtitle1"},Ke={class:"col-auto text-center",style:{width:"30px"}},Xe={class:"col-auto home-bottom row justify-center items-end q-pb-md"},Ze=S({__name:"BottomNav",setup(s){const n=[{title:"\u65E0\u7EC4\u7EC7\u76D1\u6D4B",children:[{name:"\u7A7A\u6C14\u8D28\u91CF\u5FAE\u7AD9\u6392\u884C",status:"success"},{name:"\u7A7A\u6C14\u8D28\u91CF\u5FAE\u7AD9\u53F0\u8D26",status:"success"}]},{title:"\u65E0\u7EC4\u7EC7\u6CBB\u7406\u8FC7\u7A0B",children:[{name:"\u6CBB\u7406\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]},{title:"\u65E0\u7EC4\u7EC7\u6CBB\u7406\u8FC7\u7A0B",children:[{name:"\u6CBB\u7406\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]},{title:"\u65E0\u7EC4\u7EC7\u6CBB\u7406\u8FC7\u7A0B",children:[{name:"\u6CBB\u7406\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]},{title:"\u65E0\u7EC4\u7EC7\u6CBB\u7406\u8FC7\u7A0B",children:[{name:"\u6CBB\u7406\u8FC7\u7A0B\u5168\u7EAA\u5F55",status:"success"},{name:"\u8FDD\u89C4\u884C\u4E3A\u8BC6\u522B\u7BA1\u7406",status:"success"}]}];return(c,d)=>{const h=ge,u=H,a=he;return f(),w("div",Pe,[e("div",Qe,[(f(),w(L,null,W(n,(m,p)=>e("div",{class:"col-auto",key:p},[t(v(De),{style:{width:"220px",height:"250px",margin:"0 -4px"}},{default:i(()=>[t(de,{class:"q-pa-md",style:{height:"230px"}},{default:i(()=>[e("div",Le,[A(C(m.title)+" ",1),e("span",We,"0"+C(p+1),1)]),(f(!0),w(L,null,W(m.children,(g,l)=>(f(),w("div",{class:"",key:l},[e("div",Ge,[e("div",Je,C(g.name),1),e("div",Ke,[t(h,{dot:"",type:g.status},null,8,["type"])])])]))),128))]),_:2},1024)]),_:2},1024)])),64))]),e("div",Xe,[t(a,null,{default:i(()=>[t(u,{round:"",type:"primary",style:{width:"100px"},onClick:d[0]||(d[0]=m=>c.$router.push({name:"\u65E0\u7EC4\u7EC7"}))},{default:i(()=>[A(" \u65E0\u7EC4\u7EC7 ")]),_:1}),t(u,{round:"",style:{width:"100px"}},{default:i(()=>[A(" \u6E05\u6D01\u8FD0\u8F93 ")]),_:1})]),_:1})])])}}});var et=M(Ze,[["__scopeId","data-v-73f397c2"]]);const tt={class:"row full-height items-end q-pb-xl"},st={class:"col-4 row justify-end"},nt={class:"col-4 relative-position"},ut={class:"home-bottom-center"},ot={class:"footer-btn absolute-center"},lt={class:"col-4"},at=S({__name:"HomeFooter",setup(s){const n=x(!1);return(c,d)=>{const h=et,u=Ce,a=H;return f(),w("div",tt,[e("div",st,[t(v(ie),{style:{width:"300px",height:"30px"}})]),e("div",nt,[e("div",ut,[n.value?(f(),b(h,{key:0})):ue("",!0)]),e("div",ot,[t(a,{circle:"",tertiary:"",type:"primary",size:"tiny",onClick:d[0]||(d[0]=m=>n.value=!n.value)},{icon:i(()=>[t(u,null,{default:i(()=>[t(fe,{name:"settings_overscan"})]),_:1})]),_:1})])]),e("div",lt,[t(v(ie),{style:{width:"300px",height:"30px"}})])])}}});var it=M(at,[["__scopeId","data-v-6fff5490"]]);const Be=s=>(X("data-v-30806155"),s=s(),Z(),s),ct={key:0,class:"fit text-weight-bold text-center row q-col-gutter-sm"},_t={class:"col-auto",style:{width:"200px"}},dt=Be(()=>e("div",{class:"row text-info"},[e("div",{class:"col"},"\u8BBE\u5907\u7C7B\u578B"),e("div",{class:"col"},"\u5728\u7EBF/\u603B\u6570")],-1)),rt={class:"device-table"},vt={class:"col"},pt={class:"col"},mt={class:"text-primary text-weight-bold"},ft={class:"text-primary"},ht={class:"text-warning"},gt={class:"col"},yt=Be(()=>e("div",{class:"row text-info"},[e("div",{class:"col"},"\u6307\u6807"),e("div",{class:"col"},"\u5355\u4F4D"),e("div",{class:"col"},"\u5E73\u5747\u503C"),e("div",{class:"col"},"\u6700\u5927\u503C"),e("div",{class:"col"},"\u6700\u5C0F\u503C")],-1)),Bt={class:"device-table"},Ct={class:"col"},Et={class:"col simple-font"},$t={class:"col simple-font text-info"},Ft={class:"col simple-font text-primary"},xt={class:"col simple-font text-positive"},bt=S({__name:"UnorganizeMonitor",setup(s){const{data:n}=U(Y.unoCount,N,{revalidateOnFocus:!1});return(c,d)=>{const h=j;return f(),b(h,{title:"\u65E0\u7EC4\u7EC7\u76D1\u63A7\u6570\u636E"},{default:i(()=>[v(n)?(f(),w("div",ct,[e("div",_t,[dt,e("div",rt,[(f(!0),w(L,null,W(v(n).left,u=>(f(),w("div",{class:"row",key:u.name},[e("div",vt,C(u.name),1),e("div",pt,[e("span",mt,[e("span",ft,C(u.online),1),A(" / "),e("span",ht,C(u.total),1)])])]))),128))])]),e("div",gt,[yt,e("div",Bt,[(f(!0),w(L,null,W(v(n).right,u=>(f(),w("div",{class:"row",key:u.name},[e("div",Ct,C(u.name),1),e("div",Et,C(u.unit),1),e("div",$t,C(u.avg.toFixed(2)),1),e("div",Ft,C(u.max.toFixed(2)),1),e("div",xt,C(u.min.toFixed(2)),1)]))),128))])])])):(f(),b(v(me),{key:1,class:"fit"}))]),_:1})}}});var wt=M(bt,[["__scopeId","data-v-30806155"]]);const Dt={ratio:[String,Number]};function At(s,n){return E(()=>{const c=Number(s.ratio||(n!==void 0?n.value:void 0));return isNaN(c)!==!0&&c>0?{paddingBottom:`${100/c}%`}:null})}const kt=16/9;var ce=ke({name:"QImg",props:{...Dt,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:kt},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(s,{slots:n,emit:c}){const d=x(s.initialRatio),h=At(s,d);let u=null,a=!1;const m=[x(null),x(B())],p=x(0),g=x(!1),l=x(!1),o=E(()=>`q-img q-img--${s.noNativeMenu===!0?"no-":""}menu`),y=E(()=>({width:s.width,height:s.height})),_=E(()=>`q-img__image ${s.imgClass!==void 0?s.imgClass+" ":""}q-img__image--with${s.noTransition===!0?"out":""}-transition`),F=E(()=>({...s.imgStyle,objectFit:s.fit,objectPosition:s.position}));oe(()=>k(),$);function k(){return s.src||s.srcset||s.sizes?{src:s.src,srcset:s.srcset,sizes:s.sizes}:null}function B(){return s.placeholderSrc!==void 0?{src:s.placeholderSrc}:null}function $(r){u!==null&&(clearTimeout(u),u=null),l.value=!1,r===null?(g.value=!1,m[p.value^1].value=B()):g.value=!0,m[p.value].value=r}function q({target:r}){a!==!0&&(u!==null&&(clearTimeout(u),u=null),d.value=r.naturalHeight===0?.5:r.naturalWidth/r.naturalHeight,z(r,1))}function z(r,D){a===!0||D===1e3||(r.complete===!0?O(r):u=setTimeout(()=>{u=null,z(r,D+1)},50))}function O(r){a!==!0&&(p.value=p.value^1,m[p.value].value=null,g.value=!1,l.value=!1,c("load",r.currentSrc||r.src))}function V(r){u!==null&&(clearTimeout(u),u=null),g.value=!1,l.value=!0,m[p.value].value=null,m[p.value^1].value=B(),c("error",r)}function R(r){const D=m[r].value,G={key:"img_"+r,class:_.value,style:F.value,crossorigin:s.crossorigin,decoding:s.decoding,referrerpolicy:s.referrerpolicy,height:s.height,width:s.width,loading:s.loading,fetchpriority:s.fetchpriority,"aria-hidden":"true",draggable:s.draggable,...D};return p.value===r?(G.class+=" q-img__image--waiting",Object.assign(G,{onLoad:q,onError:V})):G.class+=" q-img__image--loaded",T("div",{class:"q-img__container absolute-full",key:"img"+r},T("img",G))}function Q(){return g.value!==!0?T("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Te(n[l.value===!0?"error":"default"])):T("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},n.loading!==void 0?n.loading():s.noSpinner===!0?void 0:[T(ze,{color:s.spinnerColor,size:s.spinnerSize})])}return $(k()),Se(()=>{a=!0,u!==null&&(clearTimeout(u),u=null)}),()=>{const r=[];return h.value!==null&&r.push(T("div",{key:"filler",style:h.value})),l.value!==!0&&(m[0].value!==null&&r.push(R(0)),m[1].value!==null&&r.push(R(1))),r.push(T(qe,{name:"q-transition--fade"},Q)),T("div",{class:o.value,style:y.value,role:"img","aria-label":s.alt},r)}}}),_e="./assets/company.e14e5d37.png";const St=e("span",{class:"text-info cursor-pointer",style:{"font-weight":"lighter"}}," \u67E5\u770B\u5168\u90E8 ",-1),qt={class:"row fit items-center q-gutter-x-sm"},Tt=S({__name:"MonitorArea",setup(s){return(n,c)=>{const d=j;return f(),b(d,{title:"\u91CD\u70B9\u533A\u57DF\u76D1\u63A7"},{"header-extra":i(()=>[St]),default:i(()=>[e("div",qt,[t(ce,{src:v(_e),class:"col"},null,8,["src"]),t(ce,{src:v(_e),class:"col"},null,8,["src"])])]),_:1})}}});function zt(s){const n=E(()=>`${Y.cleaner}/${s.value.deviceId}/${s.value.range}?time_start=${s.value.time_start}&time_end=${s.value.time_end}`),{data:c}=U(n,N,{revalidateOnFocus:!1,dedupingInterval:1e3*60*60*24});return{cleanerEvents:E(()=>c.value||[])}}const Ot={class:"event-table"},It=e("div",{class:"sigma-title2"},"\u57FA\u672C\u4FE1\u606F",-1),Mt={class:"row"},Ht={class:"col"},Ut=e("span",null,"\u4F4D\u7F6E:",-1),Yt={class:"q-ml-sm text-info"},Nt={class:"col"},Vt=e("span",null,"\u4ECA\u65E5\u6D17\u8F66\u6B21\u6570:",-1),Rt={class:"q-ml-sm text-info"},jt={class:"col"},Pt=e("span",null,"\u6628\u65E5\u6D17\u8F66\u6B21\u6570:",-1),Qt={class:"q-ml-sm text-info"},Lt={class:"col"},Wt=e("span",null,"\u5B89\u88C5\u4F7F\u7528\u65F6\u95F4:",-1),Gt={class:"q-ml-sm text-info"},Jt={class:"col"},Kt=e("span",null,"\u98CE\u5E72\u8BBE\u65BD:",-1),Xt={class:"q-ml-sm text-info"},Zt={class:"col"},es=e("span",null,"\u6296\u6C34\u88C5\u7F6E:",-1),ts={class:"q-ml-sm text-info"},ss={class:"col"},ns=e("span",null,"\u6C61\u6C34\u5904\u7406\u88C5\u7F6E:",-1),us={class:"q-ml-sm text-info"},os=e("div",{class:"sigma-title2"},"\u6CBB\u7406\u8BB0\u5F55",-1),ls=S({__name:"CleanerEventTable",props:{cleaner:{},height:{}},setup(s){const n=s,c=x(null),d=B=>({style:{cursor:"pointer"},onClick:()=>{c.value=B}}),h=[{title:"\u5E8F\u53F7",key:"id",align:"center",render:function(B,$){return $+1}},{title:"\u8F66\u724C\u53F7",key:"car_id",align:"center"},{title:"\u5F00\u59CB\u65F6\u95F4",key:"time_start",align:"center"},{title:"\u6D17\u8F66\u65F6\u957F",key:"seconds",align:"center",render(B){return B.seconds+"\u79D2"}},{title:"\u7ED3\u675F\u65F6\u95F4",key:"time_end",align:"center"},{title:"\u5E73\u5747\u6C34\u538B",key:"pressure",align:"center",render(B){return B.pressure.toFixed(2)+" MPa"}}],u=E(()=>({pageSize:20,size:"small",suffix:()=>"\u5171"+y.value.length+"\u6761",showQuickJumper:!0})),a=x("default"),m=[{label:"\u9ED8\u8BA4",value:"default"},{label:"\u65E5",value:"day"},{label:"\u5468",value:"week"},{label:"\u6708",value:"month"}],p=x([I().subtract(1,"day").valueOf(),I().valueOf()]),g=E(()=>I(p.value[0]).format("YYYY-MM-DD HH")+":00:00"),l=E(()=>I(p.value[1]).format("YYYY-MM-DD HH")+":00:00"),o=x({deviceId:n.cleaner.id,range:a.value,time_start:g.value,time_end:l.value}),{cleanerEvents:y}=zt(o);function _(){o.value={deviceId:n.cleaner.id,range:a.value,time_start:g.value,time_end:l.value}}function F(){a.value="default",p.value=[I().subtract(1,"day").valueOf(),I().valueOf()],o.value={deviceId:n.cleaner.id,range:a.value,time_start:g.value,time_end:l.value}}function k(B){return B>Date.now()}return(B,$)=>{const q=ne,z=ve,O=Ee,V=H,R=pe,Q=re,r=se;return f(),w("div",Ot,[It,e("div",Mt,[e("div",Ht,[Ut,e("span",Yt,C(B.cleaner.name),1)]),e("div",Nt,[Vt,e("span",Rt,C(B.cleaner.today),1)]),e("div",jt,[Pt,e("span",Qt,C(B.cleaner.yesterday),1)]),e("div",Lt,[Wt,e("span",Gt,C(B.cleaner.date),1)]),e("div",Jt,[Kt,e("span",Xt,C(B.cleaner.dry?"\u6709":"\u65E0"),1)]),e("div",Zt,[es,e("span",ts,C(B.cleaner.shake?"\u6709":"\u65E0"),1)]),e("div",ss,[ns,e("span",us,C(B.cleaner.sewage?"\u6709":"\u65E0"),1)])]),os,t(Q,{"label-placement":"left",size:"small",class:"q-my-md"},{default:i(()=>[t(R,{cols:24,"x-gap":16},{default:i(()=>[t(z,{span:3,label:"\u65F6\u95F4\u7EF4\u5EA6:","label-style":"color:#98f2fd"},{default:i(()=>[t(q,{value:a.value,"onUpdate:value":$[0]||($[0]=D=>a.value=D),options:m},null,8,["value"])]),_:1}),t(z,{span:10,label:"\u8D77\u6B62\u65F6\u95F4:","label-style":"color:#98f2fd"},{default:i(()=>[a.value==="default"?(f(),b(O,{key:0,value:p.value,"onUpdate:value":$[1]||($[1]=D=>p.value=D),type:"datetimerange","is-date-disabled":k},null,8,["value"])):a.value==="day"?(f(),b(O,{key:1,value:p.value[0],"onUpdate:value":$[2]||($[2]=D=>p.value[0]=D),type:"date","is-date-disabled":k},null,8,["value"])):a.value==="week"?(f(),b(O,{key:2,value:p.value,"onUpdate:value":$[3]||($[3]=D=>p.value=D),type:"daterange","is-date-disabled":k},null,8,["value"])):(f(),b(O,{key:3,value:p.value[0],"onUpdate:value":$[4]||($[4]=D=>p.value[0]=D),type:"month","is-date-disabled":k},null,8,["value"]))]),_:1}),t(z,{span:10},{default:i(()=>[t(V,{type:"info",size:"small",onClick:_},{default:i(()=>[A(" \u67E5\u8BE2 ")]),_:1}),t(V,{type:"info",size:"small",class:"q-mx-md",onClick:F},{default:i(()=>[A(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1}),t(r,{columns:h,"row-props":d,data:v(y),pagination:u.value,"max-height":B.height||300,striped:"",class:"sigma-table"},null,8,["data","pagination","max-height"])])}}});function as(){const{data:s}=U(Y.cleaner,N,{revalidateOnFocus:!1,dedupingInterval:36e5});return{cleaners:E(()=>s.value||[])}}const is=S({__name:"CleanerTable",props:{height:{}},setup(s){const{cleaners:n}=as(),c=x(null),d=p=>({style:{cursor:"pointer"},onClick:()=>{c.value=p,m()}}),h=[{title:"\u5E8F\u53F7",key:"id",align:"center",render:function(p,g){return g+1}},{title:"\u4F4D\u7F6E\u540D\u79F0",key:"name",align:"center"},{title:"\u4ECA\u65E5\u6D17\u8F66\u6B21\u6570",key:"today",align:"center"},{title:"\u6628\u65E5\u6D17\u8F66\u6B21\u6570",key:"yesterday",align:"center"},{title:"\u7D2F\u8BA1\u6D17\u8F66\u6B21\u6570",key:"count",align:"center"},{title:"\u5B89\u88C5\u4F7F\u7528\u65F6\u95F4",key:"date",align:"center"}],u=E(()=>({pageSize:20,size:"small",suffix:()=>"\u5171"+n.value.length+"\u6761",showQuickJumper:!0})),{bool:a,setTrue:m}=J();return(p,g)=>{const l=se,o=ls,y=K;return f(),w("div",null,[t(l,{columns:h,"row-props":d,data:v(n),pagination:u.value,"max-height":p.height||300,striped:"",class:"sigma-table"},null,8,["data","pagination","max-height"]),c.value?(f(),b(y,{key:0,modelValue:v(a),"onUpdate:modelValue":g[0]||(g[0]=_=>ee(a)?a.value=_:null),title:"\u6D17\u8F66\u673A\u8FD0\u884C\u53F0\u8D26",style:{width:"50vw"}},{default:i(()=>[t(o,{cleaner:c.value},null,8,["cleaner"])]),_:1},8,["modelValue"])):ue("",!0)])}}});const P=s=>(X("data-v-c3d6aa62"),s=s(),Z(),s),cs={class:"row fit items-center"},_s={class:"col-6"},ds={class:"row text-center"},rs={class:"col-6"},vs=P(()=>e("div",{class:"wash-bottom"},null,-1)),ps={class:"col-6"},ms={class:"tape-font sigma-digit text-primary"},fs=P(()=>e("div",{class:"text-warning"},"\u6D17\u8F66\u673A\u603B\u6570",-1)),hs={class:"col-6 text-center"},gs={class:"sigma-underline"},ys=P(()=>e("span",{class:"text-primary"},"\u4ECA\u65E5\u6D17\u8F66",-1)),Bs={class:"text-primary tape-font sigma-digit"},Cs=P(()=>e("span",{class:"text-primary"},"\u6B21",-1)),Es={class:"sigma-underline"},$s=P(()=>e("span",{class:"text-primary"},"\u672C\u5468\u6D17\u8F66",-1)),Fs={class:"text-warning tape-font sigma-digit"},xs=P(()=>e("span",{class:"text-primary"},"\u6B21",-1)),bs=S({__name:"WashCount",setup(s){const{data:n}=U(Y.washCount,N,{revalidateOnFocus:!0}),{bool:c,setTrue:d}=J();return(h,u)=>{const a=le,m=is,p=K,g=j;return f(),b(g,{title:"\u6D17\u8F66\u673A\u52A8\u6001",loading:!v(n),class:"cursor-pointer",onClick:v(d)},{default:i(()=>{var l,o,y;return[e("div",cs,[e("div",_s,[e("div",ds,[e("div",rs,[t(fe,{name:"local_car_wash",size:"48px",color:"primary"}),vs]),e("div",ps,[e("div",null,[e("span",ms,[t(a,{from:0,to:(l=v(n))==null?void 0:l.deviceCount},null,8,["to"])]),A(" \u53F0 ")]),fs])])]),e("div",hs,[e("div",gs,[ys,e("span",Bs,[t(a,{from:0,to:(o=v(n))==null?void 0:o.day},null,8,["to"])]),Cs]),e("div",Es,[$s,e("span",Fs,[t(a,{from:0,to:(y=v(n))==null?void 0:y.week},null,8,["to"])]),xs])])]),t(p,{modelValue:v(c),"onUpdate:modelValue":u[0]||(u[0]=_=>ee(c)?c.value=_:null),title:"\u6D17\u8F66\u673A\u8FD0\u884C\u53F0\u8D26",style:{width:"50vw"}},{default:i(()=>[t(m)]),_:1},8,["modelValue"])]}),_:1},8,["loading","onClick"])}}});var ws=M(bs,[["__scopeId","data-v-c3d6aa62"]]);const Ds=s=>(X("data-v-4f79ee36"),s=s(),Z(),s),As={key:0,class:"fit row"},ks={class:"col full-height"},Ss={class:"col-auto full-height text-center column justify-center right-side"},qs={class:"text-grey"},Ts={class:"text-primary digit-font total-digit"},zs=Ds(()=>e("div",{class:"text-grey"},"\u5C0F\u65F6",-1)),Os=S({__name:"DeviceHourChart",setup(s){const n=x("year"),c=x("1"),d=[{label:"\u751F\u4EA7\u8BBE\u5907",value:"1"},{label:"\u6CBB\u7406\u8BBE\u5907",value:"2"},{label:"\u76D1\u6D4B\u8BBE\u5907",value:"3"}],h=E(()=>Y.deviceHours+n.value+"/"+c.value),{data:u}=U(h,N,{revalidateOnFocus:!1,dedupingInterval:1e3*60*5}),a=E(()=>u.value?u.value.y.reduce((l,o)=>l+o,0):0),m=E(()=>n.value==="day"?"\u65E5\u7D2F\u8BA1":n.value==="week"?"\u5468\u7D2F\u8BA1":n.value==="month"?"\u6708\u7D2F\u8BA1":"\u5E74\u7D2F\u8BA1"),p=E(()=>{var l,o;return{tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:(l=u.value)==null?void 0:l.x}],yAxis:[{type:"value",name:"\u5355\u4F4D: h"}],series:[{type:"bar",itemStyle:{color:new Fe.LinearGradient(0,0,0,1,[{offset:0,color:"rgb(242, 164, 129)"},{offset:1,color:"rgb(43, 116, 255)"}])},data:(o=u.value)==null?void 0:o.y}]}}),{domRef:g}=$e(p);return(l,o)=>{const y=H,_=he,F=ne,k=ye,B=le,$=j;return f(),b($,{title:"\u8BBE\u5907\u8FD0\u884C\u65F6\u957F\u7EDF\u8BA1"},{"header-extra":i(()=>[t(k,null,{default:i(()=>[t(_,{size:"tiny"},{default:i(()=>[t(y,{type:n.value==="day"?"primary":"default",onClick:o[0]||(o[0]=q=>n.value="day")},{default:i(()=>[A(" \u65E5 ")]),_:1},8,["type"]),t(y,{type:n.value==="week"?"primary":"default",onClick:o[1]||(o[1]=q=>n.value="week")},{default:i(()=>[A(" \u5468 ")]),_:1},8,["type"]),t(y,{type:n.value==="month"?"primary":"default",onClick:o[2]||(o[2]=q=>n.value="month")},{default:i(()=>[A(" \u6708 ")]),_:1},8,["type"]),t(y,{type:n.value==="year"?"primary":"default",onClick:o[3]||(o[3]=q=>n.value="year")},{default:i(()=>[A(" \u5E74 ")]),_:1},8,["type"])]),_:1}),t(F,{size:"tiny",value:c.value,"onUpdate:value":o[4]||(o[4]=q=>c.value=q),options:d,"consistent-menu-width":!1},null,8,["value"])]),_:1})]),default:i(()=>[v(u)?(f(),w("div",As,[e("div",ks,[e("div",{class:"fit",ref_key:"chartRef",ref:g},null,512)]),e("div",Ss,[e("div",qs,C(m.value),1),t(v(Ae),{style:{width:"160px",height:"40px"}},{default:i(()=>[e("div",Ts,[t(B,{from:0,to:a.value},null,8,["to"])])]),_:1}),zs])])):(f(),b(v(me),{key:1}))]),_:1})}}});var Is=M(Os,[["__scopeId","data-v-4f79ee36"]]);function ae(){const{data:s}=U(Y.devices,N,{revalidateOnFocus:!1,dedupingInterval:864e5}),n=x(I().format("YYYY-MM-DD HH:mm:ss"));oe(()=>s,()=>{n.value=I().format("YYYY-MM-DD HH:mm:ss")});const c=E(()=>!s.value),d=E(()=>s.value?s.value:[]),h=E(()=>{var o;return(o=d.value)==null?void 0:o.filter(y=>y.status==="\u5728\u7EBF")}),u=E(()=>({total:d.value.length,monitor:d.value.filter(o=>o.class==="\u76D1\u6D4B\u8BBE\u5907").length,monitorActive:h.value.filter(o=>o.class==="\u76D1\u6D4B\u8BBE\u5907").length,control:d.value.filter(o=>o.class==="\u6CBB\u7406\u8BBE\u5907").length,controlActive:h.value.filter(o=>o.class==="\u6CBB\u7406\u8BBE\u5907").length,produce:d.value.filter(o=>o.class==="\u751F\u4EA7\u8BBE\u5907").length,produceActive:h.value.filter(o=>o.class==="\u751F\u4EA7\u8BBE\u5907").length})),a=E(()=>{const o=new Set;d.value.forEach(_=>{o.add(_.department)});const y=[{label:"\u5168\u90E8",value:"\u5168\u90E8"}];return o.forEach(_=>{y.push({label:_,value:_})}),y}),m=E(()=>{const o=new Set;d.value.forEach(_=>{o.add(_.type)});const y=[{label:"\u5168\u90E8",value:"\u5168\u90E8"}];return o.forEach(_=>{y.push({label:_,value:_})}),y}),p=E(()=>{const o=new Set;d.value.forEach(_=>{o.add(_.status)});const y=[{label:"\u5168\u90E8",value:"\u5168\u90E8"}];return o.forEach(_=>{y.push({label:_,value:_})}),y}),g=[{label:"\u5168\u90E8",value:"\u5168\u90E8"},{label:"\u751F\u4EA7\u8BBE\u5907",value:"\u751F\u4EA7\u8BBE\u5907"},{label:"\u6CBB\u7406\u8BBE\u5907",value:"\u6CBB\u7406\u8BBE\u5907"},{label:"\u76D1\u6D4B\u8BBE\u5907",value:"\u76D1\u6D4B\u8BBE\u5907"}],l=E(()=>({departmentOptions:a.value,deviceTypeOptions:m.value,deviceStatusOptions:p.value,deviceClassOptions:g}));return{devices:d,loading:c,deviceCount:u,datetime:n,options:l}}const Ms={class:"row full-height q-py-md"},Hs={class:"col-auto sigma-number"},Us={class:"col text-info"},Ys=S({__name:"DeviceTableTop",setup(s){const{deviceCount:n}=ae(),c=E(()=>[{title:"\u5168\u573A\u8BBE\u5907\u603B\u6570",value:n.value.total},{title:"\u76D1\u6D4B\u8BBE\u5907\u603B\u6570",value:n.value.monitor},{title:"\u6CBB\u7406\u8BBE\u5907\u603B\u6570",value:n.value.control},{title:"\u751F\u4EA7\u8BBE\u5907\u603B\u6570",value:n.value.produce}]);return(d,h)=>{const u=le,a=Ie;return f(),b(a,null,{default:i(()=>[e("div",Ms,[(f(!0),w(L,null,W(c.value,m=>(f(),w("div",{class:"col-3 full-height column items-center item",key:m.title},[e("div",Hs,[t(u,{from:0,to:m.value},null,8,["to"])]),e("div",Us,C(m.title),1)]))),128))])]),_:1})}}});var Ns=M(Ys,[["__scopeId","data-v-61a63d0f"]]);const Vs={class:"q-px-lg"},Rs=S({__name:"DeviceTable",setup(s){const{bool:n,setTrue:c}=J(),{devices:d,loading:h,options:u}=ae(),a=x(d.value),m=x(null);oe(()=>h.value,_=>{_||(a.value=d.value)});const p=[{title:"\u5E8F\u53F7",key:"index",align:"center"},{title:"\u5206\u5382/\u6240\u5C5E\u533A\u57DF",key:"department"},{title:"\u8BBE\u5907\u7F16\u7801",key:"code"},{title:"\u8BBE\u5907\u540D\u79F0",key:"name"},{title:"\u8BBE\u5907\u7C7B\u522B",key:"class"},{title:"\u8BBE\u5907\u7C7B\u578B",key:"type"},{title:"\u8BBE\u5907\u72B6\u6001",key:"status",render:function(_){return T(ye,{},()=>[T(ge,{type:_.status==="\u5728\u7EBF"||_.status==="\u8FD0\u884C"?"success":"error",dot:!0}),_.status])}},{title:"\u64CD\u4F5C",key:"id",align:"center",render:function(_){return T(H,{tertiary:!0,size:"tiny",type:"info",onClick:()=>{m.value=_,c()}},()=>"\u67E5\u770B\u8BE6\u60C5")}}],g={department:"\u5168\u90E8",deviceClass:"\u5168\u90E8",deviceType:"\u5168\u90E8",status:"\u5168\u90E8",code:""},l=Oe({...g});function o(){Object.assign(l,g),a.value=d.value}function y(){a.value=d.value.filter(_=>(l.department==="\u5168\u90E8"||_.department===l.department)&&(l.deviceClass==="\u5168\u90E8"||_.class===l.deviceClass)&&(l.deviceType==="\u5168\u90E8"||_.type===l.deviceType)&&(l.status==="\u5168\u90E8"||_.status===l.status)&&(l.code===""||_.code.includes(l.code)||_.name.includes(l.code)))}return(_,F)=>{const k=Ns,B=ne,$=ve,q=xe,z=pe,O=re,V=se,R=Me,Q=K;return f(),w("div",Vs,[t(k),t(O,{class:"q-mt-sm",model:l,"label-placement":"left",size:"small"},{default:i(()=>[t(z,{cols:24,"x-gap":16},{default:i(()=>[t($,{span:6,label:"\u5206\u5382/\u6240\u5C5E\u533A\u57DF:",path:"department"},{default:i(()=>[t(B,{value:l.department,"onUpdate:value":F[0]||(F[0]=r=>l.department=r),filterable:"",options:v(u).departmentOptions},null,8,["value","options"])]),_:1}),t($,{span:6,label:"\u8BBE\u5907\u7C7B\u522B:",path:"deviceClass"},{default:i(()=>[t(B,{value:l.deviceClass,"onUpdate:value":F[1]||(F[1]=r=>l.deviceClass=r),filterable:"",options:v(u).deviceClassOptions},null,8,["value","options"])]),_:1}),t($,{span:6,label:"\u8BBE\u5907\u7C7B\u578B:",path:"deviceType"},{default:i(()=>[t(B,{value:l.deviceType,"onUpdate:value":F[2]||(F[2]=r=>l.deviceType=r),filterable:"",options:v(u).deviceTypeOptions},null,8,["value","options"])]),_:1}),t($,{span:6,label:"\u8BBE\u5907\u72B6\u6001:",path:"status"},{default:i(()=>[t(B,{value:l.status,"onUpdate:value":F[3]||(F[3]=r=>l.status=r),filterable:"",options:v(u).deviceStatusOptions},null,8,["value","options"])]),_:1}),t($,{span:6,label:"\u8BBE\u5907\u7F16\u7801/\u540D\u79F0:",path:"code"},{default:i(()=>[t(q,{value:l.code,"onUpdate:value":F[4]||(F[4]=r=>l.code=r),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["value"])]),_:1}),t($,null,{default:i(()=>[t(v(H),{type:"info",strong:"",secondary:"",onClick:y},{default:i(()=>[A(" \u67E5\u8BE2 ")]),_:1}),t(v(H),{class:"q-ml-sm",type:"info",strong:"",secondary:"",onClick:o},{default:i(()=>[A(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),t(V,{columns:p,data:a.value,pagination:!1,loading:v(h),"max-height":250,"virtual-scroll":"",striped:"",size:"small",class:"sigma-table"},null,8,["data","loading"]),m.value?(f(),b(Q,{key:0,modelValue:v(n),"onUpdate:modelValue":F[5]||(F[5]=r=>ee(n)?n.value=r:null),title:m.value.class+"\u8FD0\u884C\u60C5\u51B5",style:{width:"50vw"}},{default:i(()=>[t(R,{device:m.value},null,8,["device"])]),_:1},8,["modelValue","title"])):ue("",!0)])}}});const te=s=>(X("data-v-214fb7a4"),s=s(),Z(),s),js={class:"text-primary text-subtitle1"},Ps={class:"fit q-pt-lg"},Qs={class:"text-weight-bold text-center"},Ls=te(()=>e("div",{class:"row text-info"},[e("div",{class:"col"}),e("div",{class:"col"},"\u603B\u6570(\u53F0)"),e("div",{class:"col"},"\u5F00\u542F/\u5728\u7EBF(\u53F0)")],-1)),Ws={class:"device-table"},Gs={class:"row"},Js=te(()=>e("div",{class:"col text-info"},"\u751F\u4EA7\u8BBE\u5907",-1)),Ks={class:"col"},Xs={class:"text-warning text-weight-bold digit-font",style:{"font-size":"24px"}},Zs={class:"col"},en={class:"text-primary text-weight-bold digit-font",style:{"font-size":"24px"}},tn={class:"row"},sn=te(()=>e("div",{class:"col text-warning"},"\u6CBB\u7406\u8BBE\u5907",-1)),nn={class:"col"},un={class:"text-warning text-weight-bold digit-font",style:{"font-size":"24px"}},on={class:"col"},ln={class:"text-primary text-weight-bold digit-font",style:{"font-size":"24px"}},an={class:"row"},cn=te(()=>e("div",{class:"col text-primary"},"\u76D1\u6D4B\u8BBE\u5907",-1)),_n={class:"col"},dn={class:"text-warning text-weight-bold digit-font",style:{"font-size":"24px"}},rn={class:"col"},vn={class:"text-primary text-weight-bold digit-font",style:{"font-size":"24px"}},pn=S({__name:"DeviceCount",setup(s){const{loading:n,deviceCount:c,datetime:d}=ae(),{bool:h}=J();return(u,a)=>{const m=Rs,p=K,g=j;return f(),b(g,{title:"\u5168\u5382\u8BBE\u5907\u7BA1\u7406",loading:v(n),class:"cursor-pointer",onClick:a[1]||(a[1]=l=>h.value=!0)},{"header-extra":i(()=>[e("span",js,C(v(d)),1)]),default:i(()=>[e("div",Ps,[e("div",Qs,[Ls,e("div",Ws,[e("div",Gs,[Js,e("div",Ks,[e("span",Xs,C(v(c).produce),1)]),e("div",Zs,[e("span",en,C(v(c).produceActive),1)])]),e("div",tn,[sn,e("div",nn,[e("span",un,C(v(c).control),1)]),e("div",on,[e("span",ln,C(v(c).controlActive),1)])]),e("div",an,[cn,e("div",_n,[e("span",dn,C(v(c).monitor),1)]),e("div",rn,[e("span",vn,C(v(c).monitorActive),1)])])])])]),t(p,{modelValue:v(h),"onUpdate:modelValue":a[0]||(a[0]=l=>ee(h)?h.value=l:null),title:"\u5168\u5382\u8BBE\u5907\u7BA1\u7406",style:{width:"50vw",position:"fixed",left:"200px"}},{default:i(()=>[t(m)]),_:1},8,["modelValue"])]),_:1},8,["loading"])}}});var mn=M(pn,[["__scopeId","data-v-214fb7a4"]]);const fn={class:"row"},hn={class:"col-auto"},gn={class:"col"},yn=S({__name:"CompanyBrief",setup(s){const{data:n}=U(Y.company,N,{revalidateOnFocus:!1});return(c,d)=>{const h=be,u=j;return f(),b(u,{title:"\u4F01\u4E1A\u7B80\u4ECB",loading:!v(n)},{default:i(()=>{var a;return[e("div",fn,[e("div",hn,[t(h,{src:(a=v(n))==null?void 0:a.image,width:"220",height:"200"},null,8,["src"])]),e("div",gn,[t(de,{class:"fit q-pl-md"},{default:i(()=>{var m;return[A(C((m=v(n))==null?void 0:m.company),1)]}),_:1})])])]}),_:1},8,["loading"])}}});const Bn={},Cn={class:"col q-pa-md"},En={class:"row justify-between fit"},$n={class:"col-4 row full-height q-col-gutter-x-md"},Fn={class:"col-auto column q-col-gutter-y-md full-height"},xn={class:"col-4 full-width"},bn={class:"col-4 full-width"},wn={class:"col-4 full-width"},Dn={class:"col column q-col-gutter-y-md full-height"},An={class:"col-4 full-width"},kn={class:"col-4 full-width"},Sn={class:"col-4 full-width"},qn={class:"col-4"},Tn={class:"col-4 row full-height q-col-gutter-x-md"},zn={class:"col column q-col-gutter-y-md full-height"},On={class:"col-4 full-width"},In={class:"col-4 full-width"},Mn={class:"col-4 full-width"},Hn={class:"col-auto column q-col-gutter-y-md full-height",style:{"min-width":"500px"}},Un={class:"col-4 full-width"},Yn={class:"col-4 full-width"},Nn={class:"col-4 full-width"},Vn={class:"col-auto",style:{height:"80px"}};function Rn(s,n){const c=yn,d=mn,h=Ve,u=Re,a=Is,m=Ue,p=He,g=Ye,l=ws,o=Tt,y=je,_=wt,F=Ne,k=it;return f(),b(we,{class:"sigma-page fit column"},{default:i(()=>[e("div",Cn,[e("div",En,[e("div",$n,[e("div",Fn,[e("div",xn,[t(c)]),e("div",bn,[t(d)]),e("div",wn,[t(h)])]),e("div",Dn,[e("div",An,[t(u)]),e("div",kn,[t(a)]),e("div",Sn,[t(m)])])]),e("div",qn,[t(p)]),e("div",Tn,[e("div",zn,[e("div",On,[t(g)]),e("div",In,[t(l)]),e("div",Mn,[t(o)])]),e("div",Hn,[e("div",Un,[t(y)]),e("div",Yn,[t(_)]),e("div",Nn,[t(F)])])])])]),e("div",Vn,[t(k)])]),_:1})}var Xn=M(Bn,[["render",Rn],["__scopeId","data-v-d9cf850e"]]);export{Xn as default};
